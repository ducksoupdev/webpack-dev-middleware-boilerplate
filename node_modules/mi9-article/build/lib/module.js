module.exports =
/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;
/******/
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/*!**********************************!*\
  !*** ./src/scripts/index.coffee ***!
  \**********************************/
/***/ function(module, exports, __webpack_require__) {

	module.exports = __webpack_require__(/*! ./article */ 1);


/***/ },
/* 1 */
/*!************************************!*\
  !*** ./src/scripts/article.coffee ***!
  \************************************/
/***/ function(module, exports, __webpack_require__) {

	var Article, _, ads, cheerio, getViewModel, imageResizer, q, social, templates,
	  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };
	
	q = __webpack_require__(/*! q */ 2);
	
	_ = __webpack_require__(/*! lodash */ 3);
	
	cheerio = __webpack_require__(/*! cheerio */ 4);
	
	social = __webpack_require__(/*! mi9-social */ 5);
	
	ads = __webpack_require__(/*! mi9-ads-common */ 6);
	
	imageResizer = __webpack_require__(/*! mi9-image-resizer */ 7);
	
	templates = __webpack_require__(/*! mi9-templates-common */ 8);
	
	getViewModel = __webpack_require__(/*! ./viewModel */ 9);
	
	Article = (function() {
	  function Article(arg) {
	    var config, contentRepository, imageResizer;
	    contentRepository = arg.contentRepository, imageResizer = arg.imageResizer, config = arg.config;
	    this.viewModel = bind(this.viewModel, this);
	    this.contentRepository = contentRepository;
	    this.imageResizer = imageResizer;
	    this.config = config;
	    this.getViewModel = getViewModel;
	  }
	
	  Article.prototype.templates = {
	    outbrain: templates.outbrain,
	    author: templates.author,
	    videoBlock: templates.videoBlock,
	    ad: ads.templates.ad,
	    share: social.templates.share,
	    imageResizer: imageResizer.templates.imageResizer,
	    article: __webpack_require__(/*! ../templates/article */ 11),
	    comments: __webpack_require__(/*! ../templates/comments */ 14),
	    related: __webpack_require__(/*! ../templates/related */ 15)
	  };
	
	  Article.prototype.injectAds = function(htmlString) {
	    var $, bodyContent, significantParagraphs;
	    $ = cheerio.load(htmlString, {
	      decodeEntities: false
	    });
	    bodyContent = [];
	    significantParagraphs = [];
	    $.root().contents().map(function(i, el) {
	      if ($(this).text().trim() !== '') {
	        significantParagraphs.push(i);
	      }
	      return bodyContent.push($.html(this));
	    });
	    if (significantParagraphs.length > 3) {
	      bodyContent.splice(significantParagraphs[3], 0, this.templates.ad({
	        type: 'ad',
	        adType: 'MEDIUM'
	      }));
	    }
	    return bodyContent.join('');
	  };
	
	  Article.prototype.injectVideos = function(htmlString) {
	    var $;
	    $ = cheerio.load(htmlString, {
	      decodeEntities: false
	    });
	    $('img[data-video-id]').each((function(_this) {
	      return function(index, element) {
	        var view;
	        view = _this.templates.videoBlock({
	          model: {
	            urn: $(element).data('video-id'),
	            url: $(element).attr('src')
	          }
	        });
	        if (view) {
	          return $(element).replaceWith(view);
	        }
	      };
	    })(this));
	    return $.html();
	  };
	
	  Article.prototype.viewModel = function(dataModel) {
	    var bodyCopyWithAdsAndVideos, viewModelData;
	    viewModelData = this.getViewModel(dataModel, this.imageResizer, this.config);
	    bodyCopyWithAdsAndVideos = this.injectVideos(this.injectAds(viewModelData.current.bodyCopy));
	    return _.merge({}, viewModelData, bodyCopyWithAdsAndVideos);
	  };
	
	  return Article;
	
	})();
	
	module.exports = Article;


/***/ },
/* 2 */
/*!********************!*\
  !*** external "q" ***!
  \********************/
/***/ function(module, exports) {

	module.exports = require("q");

/***/ },
/* 3 */
/*!*************************!*\
  !*** external "lodash" ***!
  \*************************/
/***/ function(module, exports) {

	module.exports = require("lodash");

/***/ },
/* 4 */
/*!**************************!*\
  !*** external "cheerio" ***!
  \**************************/
/***/ function(module, exports) {

	module.exports = require("cheerio");

/***/ },
/* 5 */
/*!*****************************!*\
  !*** external "mi9-social" ***!
  \*****************************/
/***/ function(module, exports) {

	module.exports = require("mi9-social");

/***/ },
/* 6 */
/*!*********************************!*\
  !*** external "mi9-ads-common" ***!
  \*********************************/
/***/ function(module, exports) {

	module.exports = require("mi9-ads-common");

/***/ },
/* 7 */
/*!************************************!*\
  !*** external "mi9-image-resizer" ***!
  \************************************/
/***/ function(module, exports) {

	module.exports = require("mi9-image-resizer");

/***/ },
/* 8 */
/*!***************************************!*\
  !*** external "mi9-templates-common" ***!
  \***************************************/
/***/ function(module, exports) {

	module.exports = require("mi9-templates-common");

/***/ },
/* 9 */
/*!**************************************!*\
  !*** ./src/scripts/viewModel.coffee ***!
  \**************************************/
/***/ function(module, exports, __webpack_require__) {

	var _, buildAbsoluteUrl, buildMedia, config, filterAndMapTags, getImageSets, getRelatedDataModel, getViewModel, imageResizer, injectAds, injectAdsAndVideo, injectVideos, utils;
	
	_ = __webpack_require__(/*! lodash */ 3);
	
	utils = __webpack_require__(/*! mi9-utils */ 10);
	
	config = null;
	
	imageResizer = null;
	
	getImageSets = function(imageData) {
	  if (!imageData) {
	    return {};
	  }
	  return imageResizer.getResizedImageSet(imageData.url, {
	    width: imageData.width
	  });
	};
	
	getRelatedDataModel = function(related) {
	  if (!related) {
	    return {};
	  }
	  return {
	    media: _.merge({}, related, related.media[0], {
	      urlSet: buildMedia(related.media)
	    }),
	    url: buildAbsoluteUrl(related.url)
	  };
	};
	
	buildMedia = function(media) {
	  if (!(media != null ? media[0] : void 0)) {
	    return {};
	  }
	  return JSON.stringify(getImageSets(media[0]));
	};
	
	buildAbsoluteUrl = function(url) {
	  if (!url) {
	    return '';
	  }
	  return utils.contentUrlBuilder({
	    url: url,
	    domain: config.server.publicHost,
	    base: config.sitecore.contentBasePath
	  });
	};
	
	injectAds = function(htmlString) {
	  var $, bodyContent, significantParagraphs;
	  $ = cheerio.load(htmlString, {
	    decodeEntities: false
	  });
	  bodyContent = [];
	  significantParagraphs = [];
	  $.root().contents().map(function(i, el) {
	    if ($(this).text().trim() !== '') {
	      significantParagraphs.push(i);
	    }
	    return bodyContent.push($.html(this));
	  });
	  if (significantParagraphs.length > 3) {
	    bodyContent.splice(significantParagraphs[3], 0, ads.templates.ad({
	      type: 'ad',
	      adType: 'MEDIUM'
	    }));
	  }
	  return bodyContent.join('');
	};
	
	injectVideos = function(htmlString) {
	  var $;
	  $ = cheerio.load(htmlString, {
	    decodeEntities: false
	  });
	  $('img[data-video-id]').each((function(_this) {
	    return function(index, element) {
	      var view;
	      view = _this.templates.videoBlock({
	        model: {
	          urn: $(element).data('video-id'),
	          url: $(element).attr('src')
	        }
	      });
	      if (view) {
	        return $(element).replaceWith(view);
	      }
	    };
	  })(this));
	  return $.html();
	};
	
	injectAdsAndVideo = function(body) {
	  var bodyWithVideo;
	  bodyWithVideo = injectVideos(body);
	  return injectAds(bodyWithVideo);
	};
	
	filterAndMapTags = function(tags) {
	  return tags.filter(function(tag) {
	    return tag !== '';
	  }).map(function(tag) {
	    return {
	      name: tag,
	      url: tag.toLowerCase()
	    };
	  });
	};
	
	getViewModel = function(dataModel, imageResizerInstance, configObj) {
	  var abstractNoMarkup, descriptionNoMarkup, headlineNoMarkup, mediaObj, shareData;
	  config = configObj;
	  imageResizer = imageResizerInstance;
	  console.log(imageResizerInstance);
	  mediaObj = _.merge({}, dataModel.media[0], {
	    urlSet: buildMedia(dataModel.media)
	  });
	  headlineNoMarkup = utils.nomarkup(dataModel.headline);
	  abstractNoMarkup = dataModel.abstract ? utils.nomarkup(dataModel.abstract) : '';
	  descriptionNoMarkup = dataModel.description ? utils.nomarkup(dataModel.description) : '';
	  shareData = {
	    model: {
	      url: dataModel.url,
	      title: headlineNoMarkup,
	      abstract: abstractNoMarkup,
	      description: descriptionNoMarkup,
	      id: dataModel.id,
	      shareId: dataModel.shareId,
	      media: mediaObj
	    }
	  };
	  return {
	    current: {
	      id: dataModel.id,
	      headline: dataModel.headline || '',
	      abstract: dataModel.abstract || '',
	      description: (dataModel.abstract || '') + (dataModel.description || ''),
	      displayDateTime: utils.timeAgo(dataModel.displayDateTime),
	      media: mediaObj,
	      url: buildAbsoluteUrl(dataModel.url),
	      tags: filterAndMapTags(dataModel.tags) || [],
	      author: dataModel.author || {},
	      nomarkup: {
	        headline: headlineNoMarkup,
	        abstract: abstractNoMarkup,
	        description: descriptionNoMarkup
	      },
	      shareId: utils.uuid(),
	      shareData: shareData,
	      videoId: dataModel.media.type === 'video' ? utils.uuid() : void 0,
	      bodyCopy: dataModel.bodyCopy
	    },
	    next: getRelatedDataModel(dataModel.next),
	    previous: getRelatedDataModel(dataModel.previous),
	    header: dataModel.header,
	    partials: dataModel.templates,
	    settings: dataModel.settings || {},
	    outbrain: dataModel.outbrain || {},
	    meta: dataModel.meta || {},
	    tracking: dataModel.tracking || {}
	  };
	};
	
	module.exports = getViewModel;


/***/ },
/* 10 */
/*!****************************!*\
  !*** external "mi9-utils" ***!
  \****************************/
/***/ function(module, exports) {

	module.exports = require("mi9-utils");

/***/ },
/* 11 */
/*!************************************!*\
  !*** ./src/templates/article.jade ***!
  \************************************/
/***/ function(module, exports, __webpack_require__) {

	var jade = __webpack_require__(/*! ./~/jade/lib/runtime.js */ 12);
	
	module.exports = function template(locals) {
	var buf = [];
	var jade_mixins = {};
	var jade_interp;
	;var locals_for_with = (locals || {});(function (current, meta, next, outbrain, partials, previous, settings, tracking, trackingLinkName, undefined) {
	buf.push("<article data-module=\"decorators/trackingDecorator\" class=\"article module showVideoPlaylist showVideoPlaceholder\"><h1 class=\"article__headline\">" + (null == (jade_interp = current.headline) ? "" : jade_interp) + "</h1><div class=\"article__byline\">" + (null == (jade_interp = partials.author({model: current.author})) ? "" : jade_interp) + "</div><span class=\"article__time--desktop time\">" + (null == (jade_interp = current.displayDateTime) ? "" : jade_interp) + "</span>");
	if ( current.media.type == "video")
	{
	buf.push(null == (jade_interp = partials.videoBlock({model: current, partials: partials})) ? "" : jade_interp);
	}
	else
	{
	buf.push(null == (jade_interp = partials.imageResizer({model: current.media})) ? "" : jade_interp);
	}
	if ( current.media.caption)
	{
	buf.push("<div class=\"article__hero-caption\">" + (null == (jade_interp = current.media.caption) ? "" : jade_interp) + "</div>");
	}
	buf.push("<div class=\"article__social\">");
	if ( settings.enableGigyaSharingButtons)
	{
	buf.push("<div class=\"article__share share--responsive\">" + (null == (jade_interp = partials.share(current.shareData)) ? "" : jade_interp) + "</div>");
	}
	if ( settings.enableGigyaComments)
	{
	buf.push("<a href=\"#comments\" data-tracking-link-name=\"article__comments-jump\" class=\"article__comments-jump\"><div class=\"article__comments-icon\"></div><span>Comments</span></a>");
	}
	buf.push("</div><span class=\"article__time--mobile time\">" + (null == (jade_interp = current.displayDateTime) ? "" : jade_interp) + "</span><div class=\"article__body\">" + (null == (jade_interp = current.bodyCopy) ? "" : jade_interp) + "</div><ul class=\"article__tags\">");
	if ( tracking.site != null)
	{
	buf.push("<li class=\"article__tag\"><a" + (jade.attr("href", "/" + (tracking.site) + "", true, false)) + " data-tracking-link-name=\"article_section\">" + (null == (jade_interp = tracking.site) ? "" : jade_interp) + "</a></li>");
	}
	// iterate current.tags
	;(function(){
	  var $$obj = current.tags;
	  if ('number' == typeof $$obj.length) {
	
	    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {
	      var tag = $$obj[$index];
	
	buf.push("<li class=\"article__tag\"><a" + (jade.attr("href", "/" + (tag.url) + "", true, false)) + " data-tracking-link-name=\"article__tag\">" + (null == (jade_interp = tag.name) ? "" : jade_interp) + "</a></li>");
	    }
	
	  } else {
	    var $$l = 0;
	    for (var $index in $$obj) {
	      $$l++;      var tag = $$obj[$index];
	
	buf.push("<li class=\"article__tag\"><a" + (jade.attr("href", "/" + (tag.url) + "", true, false)) + " data-tracking-link-name=\"article__tag\">" + (null == (jade_interp = tag.name) ? "" : jade_interp) + "</a></li>");
	    }
	
	  }
	}).call(this);
	
	buf.push("</ul><div class=\"article__related\">");
	if ( previous)
	{
	buf.push("<div class=\"article__related-item article__related-item--previous\"><h3>Previous</h3>" + (null == (jade_interp = partials.related({trackingLinkName: 'article_previous', model: previous, partials: partials})) ? "" : jade_interp) + "</div>");
	}
	if ( next)
	{
	trackingLinkName = 'article_next'
	buf.push("<div class=\"article__related-item article__related-item--next\"><h3>Next</h3>" + (null == (jade_interp = partials.related({trackingLinkName: 'article_next', model: next, partials: partials})) ? "" : jade_interp) + "</div>");
	}
	buf.push("</div>");
	if ( settings.enableOutbrainRecommended)
	{
	buf.push("<div class=\"article__outbrain\">" + (null == (jade_interp = partials.outbrain({model: {url: meta.url, widgetId: outbrain.widgetId, obTemplate: outbrain.obTemplate}})) ? "" : jade_interp) + "</div>");
	}
	if ( settings.enableGigyaComments)
	{
	buf.push("<div id=\"comments\" class=\"article__comments\"><h3 class=\"article_comments-header\">Post a comment on this story</h3>" + (null == (jade_interp = partials.comments({model: {id: current.id, url: current.url, sitename: meta.sitename}})) ? "" : jade_interp) + "</div>");
	}
	buf.push("</article>");}.call(this,"current" in locals_for_with?locals_for_with.current:typeof current!=="undefined"?current:undefined,"meta" in locals_for_with?locals_for_with.meta:typeof meta!=="undefined"?meta:undefined,"next" in locals_for_with?locals_for_with.next:typeof next!=="undefined"?next:undefined,"outbrain" in locals_for_with?locals_for_with.outbrain:typeof outbrain!=="undefined"?outbrain:undefined,"partials" in locals_for_with?locals_for_with.partials:typeof partials!=="undefined"?partials:undefined,"previous" in locals_for_with?locals_for_with.previous:typeof previous!=="undefined"?previous:undefined,"settings" in locals_for_with?locals_for_with.settings:typeof settings!=="undefined"?settings:undefined,"tracking" in locals_for_with?locals_for_with.tracking:typeof tracking!=="undefined"?tracking:undefined,"trackingLinkName" in locals_for_with?locals_for_with.trackingLinkName:typeof trackingLinkName!=="undefined"?trackingLinkName:undefined,"undefined" in locals_for_with?locals_for_with.undefined: false?undefined:undefined));;return buf.join("");
	}

/***/ },
/* 12 */
/*!*******************************!*\
  !*** ./~/jade/lib/runtime.js ***!
  \*******************************/
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	
	/**
	 * Merge two attribute objects giving precedence
	 * to values in object `b`. Classes are special-cased
	 * allowing for arrays and merging/joining appropriately
	 * resulting in a string.
	 *
	 * @param {Object} a
	 * @param {Object} b
	 * @return {Object} a
	 * @api private
	 */
	
	exports.merge = function merge(a, b) {
	  if (arguments.length === 1) {
	    var attrs = a[0];
	    for (var i = 1; i < a.length; i++) {
	      attrs = merge(attrs, a[i]);
	    }
	    return attrs;
	  }
	  var ac = a['class'];
	  var bc = b['class'];
	
	  if (ac || bc) {
	    ac = ac || [];
	    bc = bc || [];
	    if (!Array.isArray(ac)) ac = [ac];
	    if (!Array.isArray(bc)) bc = [bc];
	    a['class'] = ac.concat(bc).filter(nulls);
	  }
	
	  for (var key in b) {
	    if (key != 'class') {
	      a[key] = b[key];
	    }
	  }
	
	  return a;
	};
	
	/**
	 * Filter null `val`s.
	 *
	 * @param {*} val
	 * @return {Boolean}
	 * @api private
	 */
	
	function nulls(val) {
	  return val != null && val !== '';
	}
	
	/**
	 * join array as classes.
	 *
	 * @param {*} val
	 * @return {String}
	 */
	exports.joinClasses = joinClasses;
	function joinClasses(val) {
	  return (Array.isArray(val) ? val.map(joinClasses) :
	    (val && typeof val === 'object') ? Object.keys(val).filter(function (key) { return val[key]; }) :
	    [val]).filter(nulls).join(' ');
	}
	
	/**
	 * Render the given classes.
	 *
	 * @param {Array} classes
	 * @param {Array.<Boolean>} escaped
	 * @return {String}
	 */
	exports.cls = function cls(classes, escaped) {
	  var buf = [];
	  for (var i = 0; i < classes.length; i++) {
	    if (escaped && escaped[i]) {
	      buf.push(exports.escape(joinClasses([classes[i]])));
	    } else {
	      buf.push(joinClasses(classes[i]));
	    }
	  }
	  var text = joinClasses(buf);
	  if (text.length) {
	    return ' class="' + text + '"';
	  } else {
	    return '';
	  }
	};
	
	
	exports.style = function (val) {
	  if (val && typeof val === 'object') {
	    return Object.keys(val).map(function (style) {
	      return style + ':' + val[style];
	    }).join(';');
	  } else {
	    return val;
	  }
	};
	/**
	 * Render the given attribute.
	 *
	 * @param {String} key
	 * @param {String} val
	 * @param {Boolean} escaped
	 * @param {Boolean} terse
	 * @return {String}
	 */
	exports.attr = function attr(key, val, escaped, terse) {
	  if (key === 'style') {
	    val = exports.style(val);
	  }
	  if ('boolean' == typeof val || null == val) {
	    if (val) {
	      return ' ' + (terse ? key : key + '="' + key + '"');
	    } else {
	      return '';
	    }
	  } else if (0 == key.indexOf('data') && 'string' != typeof val) {
	    if (JSON.stringify(val).indexOf('&') !== -1) {
	      console.warn('Since Jade 2.0.0, ampersands (`&`) in data attributes ' +
	                   'will be escaped to `&amp;`');
	    };
	    if (val && typeof val.toISOString === 'function') {
	      console.warn('Jade will eliminate the double quotes around dates in ' +
	                   'ISO form after 2.0.0');
	    }
	    return ' ' + key + "='" + JSON.stringify(val).replace(/'/g, '&apos;') + "'";
	  } else if (escaped) {
	    if (val && typeof val.toISOString === 'function') {
	      console.warn('Jade will stringify dates in ISO form after 2.0.0');
	    }
	    return ' ' + key + '="' + exports.escape(val) + '"';
	  } else {
	    if (val && typeof val.toISOString === 'function') {
	      console.warn('Jade will stringify dates in ISO form after 2.0.0');
	    }
	    return ' ' + key + '="' + val + '"';
	  }
	};
	
	/**
	 * Render the given attributes object.
	 *
	 * @param {Object} obj
	 * @param {Object} escaped
	 * @return {String}
	 */
	exports.attrs = function attrs(obj, terse){
	  var buf = [];
	
	  var keys = Object.keys(obj);
	
	  if (keys.length) {
	    for (var i = 0; i < keys.length; ++i) {
	      var key = keys[i]
	        , val = obj[key];
	
	      if ('class' == key) {
	        if (val = joinClasses(val)) {
	          buf.push(' ' + key + '="' + val + '"');
	        }
	      } else {
	        buf.push(exports.attr(key, val, false, terse));
	      }
	    }
	  }
	
	  return buf.join('');
	};
	
	/**
	 * Escape the given string of `html`.
	 *
	 * @param {String} html
	 * @return {String}
	 * @api private
	 */
	
	var jade_encode_html_rules = {
	  '&': '&amp;',
	  '<': '&lt;',
	  '>': '&gt;',
	  '"': '&quot;'
	};
	var jade_match_html = /[&<>"]/g;
	
	function jade_encode_char(c) {
	  return jade_encode_html_rules[c] || c;
	}
	
	exports.escape = jade_escape;
	function jade_escape(html){
	  var result = String(html).replace(jade_match_html, jade_encode_char);
	  if (result === '' + html) return html;
	  else return result;
	};
	
	/**
	 * Re-throw the given `err` in context to the
	 * the jade in `filename` at the given `lineno`.
	 *
	 * @param {Error} err
	 * @param {String} filename
	 * @param {String} lineno
	 * @api private
	 */
	
	exports.rethrow = function rethrow(err, filename, lineno, str){
	  if (!(err instanceof Error)) throw err;
	  if ((typeof window != 'undefined' || !filename) && !str) {
	    err.message += ' on line ' + lineno;
	    throw err;
	  }
	  try {
	    str = str || __webpack_require__(/*! fs */ 13).readFileSync(filename, 'utf8')
	  } catch (ex) {
	    rethrow(err, null, lineno)
	  }
	  var context = 3
	    , lines = str.split('\n')
	    , start = Math.max(lineno - context, 0)
	    , end = Math.min(lines.length, lineno + context);
	
	  // Error context
	  var context = lines.slice(start, end).map(function(line, i){
	    var curr = i + start + 1;
	    return (curr == lineno ? '  > ' : '    ')
	      + curr
	      + '| '
	      + line;
	  }).join('\n');
	
	  // Alter exception message
	  err.path = filename;
	  err.message = (filename || 'Jade') + ':' + lineno
	    + '\n' + context + '\n\n' + err.message;
	  throw err;
	};
	
	exports.DebugItem = function DebugItem(lineno, filename) {
	  this.lineno = lineno;
	  this.filename = filename;
	}


/***/ },
/* 13 */
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ function(module, exports) {

	module.exports = require("fs");

/***/ },
/* 14 */
/*!*************************************!*\
  !*** ./src/templates/comments.jade ***!
  \*************************************/
/***/ function(module, exports, __webpack_require__) {

	var jade = __webpack_require__(/*! ./~/jade/lib/runtime.js */ 12);
	
	module.exports = function template(locals) {
	var buf = [];
	var jade_mixins = {};
	var jade_interp;
	;var locals_for_with = (locals || {});(function (model) {
	buf.push("<div" + (jade.attr("id", model.id, true, false)) + " data-module=\"decorators/commentsDecorator\"" + (jade.attr("data-category-id", model.sitename, true, false)) + (jade.attr("data-stream-id", model.url, true, false)) + " class=\"comments module\"></div>");}.call(this,"model" in locals_for_with?locals_for_with.model:typeof model!=="undefined"?model:undefined));;return buf.join("");
	}

/***/ },
/* 15 */
/*!************************************!*\
  !*** ./src/templates/related.jade ***!
  \************************************/
/***/ function(module, exports, __webpack_require__) {

	var jade = __webpack_require__(/*! ./~/jade/lib/runtime.js */ 12);
	
	module.exports = function template(locals) {
	var buf = [];
	var jade_mixins = {};
	var jade_interp;
	;var locals_for_with = (locals || {});(function (model, partials) {
	buf.push("<a" + (jade.attr("href", model.url, true, false)) + (jade.attr("data-tracking-link-name", model.trackingLinkName, true, false)) + " class=\"related heading-link\">");
	if ( model.media)
	{
	buf.push("<div class=\"related__image\">" + (null == (jade_interp = partials.imageResizer({model: model.media})) ? "" : jade_interp) + "</div><div class=\"related__heading\">" + (null == (jade_interp = model.media.headline) ? "" : jade_interp) + "</div>");
	}
	buf.push("</a>");}.call(this,"model" in locals_for_with?locals_for_with.model:typeof model!=="undefined"?model:undefined,"partials" in locals_for_with?locals_for_with.partials:typeof partials!=="undefined"?partials:undefined));;return buf.join("");
	}

/***/ }
/******/ ]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vbm9kZV9tb2R1bGVzL21pOS1hcnRpY2xlL3dlYnBhY2svYm9vdHN0cmFwIGMxMWY4N2UzMzBiOTAwMzI5ZjViIiwid2VicGFjazovLy9ub2RlX21vZHVsZXMvbWk5LWFydGljbGUvLi9zcmMvc2NyaXB0cy9pbmRleC5jb2ZmZWUiLCJ3ZWJwYWNrOi8vL25vZGVfbW9kdWxlcy9taTktYXJ0aWNsZS8uL3NyYy9zY3JpcHRzL2FydGljbGUuY29mZmVlIiwid2VicGFjazovLy9ub2RlX21vZHVsZXMvbWk5LWFydGljbGUvZXh0ZXJuYWwgXCJxXCIiLCJ3ZWJwYWNrOi8vL25vZGVfbW9kdWxlcy9taTktYXJ0aWNsZS9leHRlcm5hbCBcImxvZGFzaFwiIiwid2VicGFjazovLy9ub2RlX21vZHVsZXMvbWk5LWFydGljbGUvZXh0ZXJuYWwgXCJjaGVlcmlvXCIiLCJ3ZWJwYWNrOi8vL25vZGVfbW9kdWxlcy9taTktYXJ0aWNsZS9leHRlcm5hbCBcIm1pOS1zb2NpYWxcIiIsIndlYnBhY2s6Ly8vbm9kZV9tb2R1bGVzL21pOS1hcnRpY2xlL2V4dGVybmFsIFwibWk5LWFkcy1jb21tb25cIiIsIndlYnBhY2s6Ly8vbm9kZV9tb2R1bGVzL21pOS1hcnRpY2xlL2V4dGVybmFsIFwibWk5LWltYWdlLXJlc2l6ZXJcIiIsIndlYnBhY2s6Ly8vbm9kZV9tb2R1bGVzL21pOS1hcnRpY2xlL2V4dGVybmFsIFwibWk5LXRlbXBsYXRlcy1jb21tb25cIiIsIndlYnBhY2s6Ly8vbm9kZV9tb2R1bGVzL21pOS1hcnRpY2xlLy4vc3JjL3NjcmlwdHMvdmlld01vZGVsLmNvZmZlZSIsIndlYnBhY2s6Ly8vbm9kZV9tb2R1bGVzL21pOS1hcnRpY2xlL2V4dGVybmFsIFwibWk5LXV0aWxzXCIiLCJ3ZWJwYWNrOi8vL25vZGVfbW9kdWxlcy9taTktYXJ0aWNsZS8uL3NyYy90ZW1wbGF0ZXMvYXJ0aWNsZS5qYWRlIiwid2VicGFjazovLy9ub2RlX21vZHVsZXMvbWk5LWFydGljbGUvLi9+L2phZGUvbGliL3J1bnRpbWUuanMiLCJ3ZWJwYWNrOi8vL25vZGVfbW9kdWxlcy9taTktYXJ0aWNsZS9leHRlcm5hbCBcImZzXCIiLCJ3ZWJwYWNrOi8vL25vZGVfbW9kdWxlcy9taTktYXJ0aWNsZS8uL3NyYy90ZW1wbGF0ZXMvY29tbWVudHMuamFkZSIsIndlYnBhY2s6Ly8vbm9kZV9tb2R1bGVzL21pOS1hcnRpY2xlLy4vc3JjL3RlbXBsYXRlcy9yZWxhdGVkLmphZGUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx1QkFBZTtBQUNmO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOzs7Ozs7Ozs7O0FDdENBLE9BQU0sQ0FBQyxPQUFQLEdBQWlCLG9CQUFRLGtCQUFSOzs7Ozs7Ozs7O0FDQWpCO0dBQUE7O0FBQUEsS0FBSSxvQkFBUSxVQUFSOztBQUNKLEtBQUksb0JBQVEsZUFBUjs7QUFDSixXQUFVLG9CQUFRLGdCQUFSOztBQUNWLFVBQVMsb0JBQVEsbUJBQVI7O0FBQ1QsT0FBTSxvQkFBUSx1QkFBUjs7QUFDTixnQkFBZSxvQkFBUSwwQkFBUjs7QUFDZixhQUFZLG9CQUFRLDZCQUFSOztBQUNaLGdCQUFlLG9CQUFRLG9CQUFSOztBQUVUO0dBRVcsaUJBQUMsR0FBRDtBQUNUO0tBRFcsMkNBQW1CLGlDQUFjOztLQUM1QyxJQUFDLGtCQUFELEdBQXFCO0tBQ3JCLElBQUMsYUFBRCxHQUFnQjtLQUNoQixJQUFDLE9BQUQsR0FBVTtLQUNWLElBQUMsYUFBRCxHQUFnQjtHQUpQOztxQkFNYixZQUNJO0tBQUEsVUFBVSxTQUFTLENBQUMsUUFBcEI7S0FDQSxRQUFRLFNBQVMsQ0FBQyxNQURsQjtLQUVBLFlBQVksU0FBUyxDQUFDLFVBRnRCO0tBR0EsSUFBSSxHQUFHLENB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Ozs7Ozs7Ozs7QUNBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUMsbUNBQW1DLEVBQUU7QUFDdEMsNlFBQTRRLDBHQUEwRztBQUN0WCxFOzs7Ozs7Ozs7QUNSQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUMsbUNBQW1DLEVBQUU7QUFDdEM7QUFDQTtBQUNBO0FBQ0EsNEZBQTJGLG1CQUFtQjtBQUM5RztBQUNBLG1CQUFrQixrTkFBa047QUFDcE8sRSIsImZpbGUiOiJsaWIvbW9kdWxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG5cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGV4cG9ydHM6IHt9LFxuIFx0XHRcdGlkOiBtb2R1bGVJZCxcbiBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiB3ZWJwYWNrL2Jvb3RzdHJhcCBjMTFmODdlMzMwYjkwMDMyOWY1YlxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSAnLi9hcnRpY2xlJ1xuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vfi9jb2ZmZWVsaW50LWxvYWRlciEuL3NyYy9zY3JpcHRzL2luZGV4LmNvZmZlZVxuICoqLyIsInEgPSByZXF1aXJlICdxJ1xuXyA9IHJlcXVpcmUgJ2xvZGFzaCdcbmNoZWVyaW8gPSByZXF1aXJlICdjaGVlcmlvJ1xuc29jaWFsID0gcmVxdWlyZSAnbWk5LXNvY2lhbCdcbmFkcyA9IHJlcXVpcmUgJ21pOS1hZHMtY29tbW9uJ1xuaW1hZ2VSZXNpemVyID0gcmVxdWlyZSAnbWk5LWltYWdlLXJlc2l6ZXInXG50ZW1wbGF0ZXMgPSByZXF1aXJlICdtaTktdGVtcGxhdGVzLWNvbW1vbidcbmdldFZpZXdNb2RlbCA9IHJlcXVpcmUgJy4vdmlld01vZGVsJ1xuXG5jbGFzcyBBcnRpY2xlXG5cbiAgICBjb25zdHJ1Y3RvcjogKHtjb250ZW50UmVwb3NpdG9yeSwgaW1hZ2VSZXNpemVyLCBjb25maWd9KSAtPlxuICAgICAgICBAY29udGVudFJlcG9zaXRvcnkgPSBjb250ZW50UmVwb3NpdG9yeVxuICAgICAgICBAaW1hZ2VSZXNpemVyID0gaW1hZ2VSZXNpemVyXG4gICAgICAgIEBjb25maWcgPSBjb25maWdcbiAgICAgICAgQGdldFZpZXdNb2RlbCA9IGdldFZpZXdNb2RlbFxuXG4gICAgdGVtcGxhdGVzOlxuICAgICAgICBvdXRicmFpbjogdGVtcGxhdGVzLm91dGJyYWluXG4gICAgICAgIGF1dGhvcjogdGVtcGxhdGVzLmF1dGhvclxuICAgICAgICB2aWRlb0Jsb2NrOiB0ZW1wbGF0ZXMudmlkZW9CbG9ja1xuICAgICAgICBhZDogYWRzLnRlbXBsYXRlcy5hZFxuICAgICAgICBzaGFyZTogc29jaWFsLnRlbXBsYXRlcy5zaGFyZVxuICAgICAgICBpbWFnZVJlc2l6ZXI6IGltYWdlUmVzaXplci50ZW1wbGF0ZXMuaW1hZ2VSZXNpemVyXG4gICAgICAgIGFydGljbGU6IHJlcXVpcmUgJy4uL3RlbXBsYXRlcy9hcnRpY2xlJ1xuICAgICAgICBjb21tZW50czogcmVxdWlyZSAnLi4vdGVtcGxhdGVzL2NvbW1lbnRzJ1xuICAgICAgICByZWxhdGVkOiByZXF1aXJlICcuLi90ZW1wbGF0ZXMvcmVsYXRlZCdcblxuICAgIGluamVjdEFkczogKGh0bWxTdHJpbmcpIC0+XG4gICAgICAgICQgPSBjaGVlcmlvLmxvYWQgaHRtbFN0cmluZywgZGVjb2RlRW50aXRpZXM6IGZhbHNlXG4gICAgICAgIGJvZHlDb250ZW50ID0gW11cbiAgICAgICAgc2lnbmlmaWNhbnRQYXJhZ3JhcGhzID0gW11cblxuICAgICAgICAkLnJvb3QoKS5jb250ZW50cygpLm1hcCAoaSwgZWwpIC0+XG4gICAgICAgICAgICBzaWduaWZpY2FudFBhcmFncmFwaHMucHVzaCBpIGlmICQodGhpcykudGV4dCgpLnRyaW0oKSBpc250ICcnXG4gICAgICAgICAgICBib2R5Q29udGVudC5wdXNoICQuaHRtbCh0aGlzKVxuXG4gICAgICAgIGlmIHNpZ25pZmljYW50UGFyYWdyYXBocy5sZW5ndGggPiAzXG4gICAgICAgICAgICAjIGluamVjdCBhZCBhZnRlciBmaWZ0aCBwYXJhZ3JhcGggdGhhdCBjb250YWlucyB0ZXh0XG4gICAgICAgICAgICBib2R5Q29udGVudC5zcGxpY2Ugc2lnbmlmaWNhbnRQYXJhZ3JhcGhzWzNdLCAwLCBAdGVtcGxhdGVzLmFkKHt0eXBlOiAnYWQnLCBhZFR5cGU6ICdNRURJVU0nfSlcblxuICAgICAgICByZXR1cm4gYm9keUNvbnRlbnQuam9pbignJylcblxuICAgIGluamVjdFZpZGVvczogKGh0bWxTdHJpbmcpIC0+XG4gICAgICAgICQgPSBjaGVlcmlvLmxvYWQgaHRtbFN0cmluZywgZGVjb2RlRW50aXRpZXM6IGZhbHNlXG5cbiAgICAgICAgJCgnaW1nW2RhdGEtdmlkZW8taWRdJykuZWFjaCAoaW5kZXgsIGVsZW1lbnQpID0+XG4gICAgICAgICAgICB2aWV3ID0gQHRlbXBsYXRlcy52aWRlb0Jsb2NrKFxuICAgICAgICAgICAgICAgIG1vZGVsOiB7XG4gICAgICAgICAgICAgICAgICAgIHVybjogJChlbGVtZW50KS5kYXRhKCd2aWRlby1pZCcpXG4gICAgICAgICAgICAgICAgICAgIHVybDogJChlbGVtZW50KS5hdHRyKCdzcmMnKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIClcbiAgICAgICAgICAgICQoZWxlbWVudCkucmVwbGFjZVdpdGgodmlldykgaWYgdmlld1xuXG4gICAgICAgIHJldHVybiAkLmh0bWwoKVxuXG4gICAgdmlld01vZGVsOiAoZGF0YU1vZGVsKSA9PlxuICAgICAgICB2aWV3TW9kZWxEYXRhID0gQGdldFZpZXdNb2RlbChkYXRhTW9kZWwsIEBpbWFnZVJlc2l6ZXIsIEBjb25maWcpXG4gICAgICAgIGJvZHlDb3B5V2l0aEFkc0FuZFZpZGVvcyA9IEBpbmplY3RWaWRlb3MgQGluamVjdEFkcyh2aWV3TW9kZWxEYXRhLmN1cnJlbnQuYm9keUNvcHkpXG4gICAgICAgIHJldHVybiBfLm1lcmdlIHt9LCB2aWV3TW9kZWxEYXRhLCBib2R5Q29weVdpdGhBZHNBbmRWaWRlb3NcblxubW9kdWxlLmV4cG9ydHMgPSBBcnRpY2xlXG5cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vfi9jb2ZmZWVsaW50LWxvYWRlciEuL3NyYy9zY3JpcHRzL2FydGljbGUuY29mZmVlXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwicVwiKTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIGV4dGVybmFsIFwicVwiXG4gKiogbW9kdWxlIGlkID0gMlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwibG9kYXNoXCIpO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogZXh0ZXJuYWwgXCJsb2Rhc2hcIlxuICoqIG1vZHVsZSBpZCA9IDNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImNoZWVyaW9cIik7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiBleHRlcm5hbCBcImNoZWVyaW9cIlxuICoqIG1vZHVsZSBpZCA9IDRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIm1pOS1zb2NpYWxcIik7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiBleHRlcm5hbCBcIm1pOS1zb2NpYWxcIlxuICoqIG1vZHVsZSBpZCA9IDVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIm1pOS1hZHMtY29tbW9uXCIpO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogZXh0ZXJuYWwgXCJtaTktYWRzLWNvbW1vblwiXG4gKiogbW9kdWxlIGlkID0gNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwibWk5LWltYWdlLXJlc2l6ZXJcIik7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiBleHRlcm5hbCBcIm1pOS1pbWFnZS1yZXNpemVyXCJcbiAqKiBtb2R1bGUgaWQgPSA3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJtaTktdGVtcGxhdGVzLWNvbW1vblwiKTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIGV4dGVybmFsIFwibWk5LXRlbXBsYXRlcy1jb21tb25cIlxuICoqIG1vZHVsZSBpZCA9IDhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIl8gPSByZXF1aXJlICdsb2Rhc2gnXG51dGlscyA9IHJlcXVpcmUgJ21pOS11dGlscydcbmNvbmZpZyA9IG51bGxcbmltYWdlUmVzaXplciA9IG51bGxcblxuZ2V0SW1hZ2VTZXRzID0gKGltYWdlRGF0YSkgLT5cbiAgICByZXR1cm4ge30gdW5sZXNzIGltYWdlRGF0YVxuICAgIGltYWdlUmVzaXplci5nZXRSZXNpemVkSW1hZ2VTZXQoaW1hZ2VEYXRhLnVybCwge3dpZHRoOiBpbWFnZURhdGEud2lkdGh9KVxuXG5nZXRSZWxhdGVkRGF0YU1vZGVsID0gKHJlbGF0ZWQpIC0+XG4gICAgcmV0dXJuIHt9IHVubGVzcyByZWxhdGVkXG4gICAgcmV0dXJuIHtcbiAgICAgICAgbWVkaWE6IF8ubWVyZ2Uge30sIHJlbGF0ZWQsIHJlbGF0ZWQubWVkaWFbMF0sIHt1cmxTZXQ6IGJ1aWxkTWVkaWEocmVsYXRlZC5tZWRpYSl9XG4gICAgICAgIHVybDogYnVpbGRBYnNvbHV0ZVVybChyZWxhdGVkLnVybClcbiAgICB9XG5cbmJ1aWxkTWVkaWEgPSAobWVkaWEpIC0+XG4gICAgcmV0dXJuIHt9IHVubGVzcyBtZWRpYT9bMF1cbiAgICBKU09OLnN0cmluZ2lmeSBnZXRJbWFnZVNldHMgbWVkaWFbMF1cblxuYnVpbGRBYnNvbHV0ZVVybCA9ICh1cmwpIC0+XG4gICAgcmV0dXJuICcnIHVubGVzcyB1cmxcbiAgICB1dGlscy5jb250ZW50VXJsQnVpbGRlcih7dXJsLCBkb21haW46IGNvbmZpZy5zZXJ2ZXIucHVibGljSG9zdCwgYmFzZTogY29uZmlnLnNpdGVjb3JlLmNvbnRlbnRCYXNlUGF0aH0pXG5cbmluamVjdEFkcyA9IChodG1sU3RyaW5nKSAtPlxuICAgICQgPSBjaGVlcmlvLmxvYWQgaHRtbFN0cmluZywgZGVjb2RlRW50aXRpZXM6IGZhbHNlXG4gICAgYm9keUNvbnRlbnQgPSBbXVxuICAgIHNpZ25pZmljYW50UGFyYWdyYXBocyA9IFtdXG5cbiAgICAkLnJvb3QoKS5jb250ZW50cygpLm1hcCAoaSwgZWwpIC0+XG4gICAgICAgIHNpZ25pZmljYW50UGFyYWdyYXBocy5wdXNoIGkgaWYgJCh0aGlzKS50ZXh0KCkudHJpbSgpIGlzbnQgJydcbiAgICAgICAgYm9keUNvbnRlbnQucHVzaCAkLmh0bWwodGhpcylcblxuICAgIGlmIHNpZ25pZmljYW50UGFyYWdyYXBocy5sZW5ndGggPiAzXG4gICAgICAgICMgaW5qZWN0IGFkIGFmdGVyIGZpZnRoIHBhcmFncmFwaCB0aGF0IGNvbnRhaW5zIHRleHRcbiAgICAgICAgYm9keUNvbnRlbnQuc3BsaWNlIHNpZ25pZmljYW50UGFyYWdyYXBoc1szXSwgMCwgYWRzLnRlbXBsYXRlcy5hZCh7dHlwZTogJ2FkJywgYWRUeXBlOiAnTUVESVVNJ30pXG5cbiAgICByZXR1cm4gYm9keUNvbnRlbnQuam9pbignJylcblxuaW5qZWN0VmlkZW9zID0gKGh0bWxTdHJpbmcpIC0+XG4gICAgJCA9IGNoZWVyaW8ubG9hZCBodG1sU3RyaW5nLCBkZWNvZGVFbnRpdGllczogZmFsc2VcblxuICAgICQoJ2ltZ1tkYXRhLXZpZGVvLWlkXScpLmVhY2ggKGluZGV4LCBlbGVtZW50KSA9PlxuICAgICAgICB2aWV3ID0gQHRlbXBsYXRlcy52aWRlb0Jsb2NrKFxuICAgICAgICAgICAgbW9kZWw6IHtcbiAgICAgICAgICAgICAgICB1cm46ICQoZWxlbWVudCkuZGF0YSgndmlkZW8taWQnKVxuICAgICAgICAgICAgICAgIHVybDogJChlbGVtZW50KS5hdHRyKCdzcmMnKVxuICAgICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgICQoZWxlbWVudCkucmVwbGFjZVdpdGgodmlldykgaWYgdmlld1xuXG4gICAgcmV0dXJuICQuaHRtbCgpXG5cblxuaW5qZWN0QWRzQW5kVmlkZW8gPSAoYm9keSkgLT5cbiAgICBib2R5V2l0aFZpZGVvID0gaW5qZWN0VmlkZW9zKGJvZHkpXG4gICAgcmV0dXJuIGluamVjdEFkcyhib2R5V2l0aFZpZGVvKVxuXG5cbmZpbHRlckFuZE1hcFRhZ3MgPSAodGFncykgLT5cbiAgICB0YWdzLmZpbHRlcigodGFnKSAtPiB0YWcgaXNudCAnJylcbiAgICAgICAgLm1hcCAodGFnKSAtPlxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBuYW1lOiB0YWdcbiAgICAgICAgICAgICAgICB1cmw6IHRhZy50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgICB9XG5cbmdldFZpZXdNb2RlbCA9IChkYXRhTW9kZWwsIGltYWdlUmVzaXplckluc3RhbmNlLCBjb25maWdPYmopIC0+XG4gICAgY29uZmlnID0gY29uZmlnT2JqXG4gICAgaW1hZ2VSZXNpemVyID0gaW1hZ2VSZXNpemVySW5zdGFuY2VcbiAgICBjb25zb2xlLmxvZyBpbWFnZVJlc2l6ZXJJbnN0YW5jZVxuXG4gICAgbWVkaWFPYmogPSBfLm1lcmdlIHt9LCBkYXRhTW9kZWwubWVkaWFbMF0sIHt1cmxTZXQ6IGJ1aWxkTWVkaWEoZGF0YU1vZGVsLm1lZGlhKX1cblxuICAgICMjIE5vIE1hcmt1cCBkYXRhXG4gICAgaGVhZGxpbmVOb01hcmt1cCA9IHV0aWxzLm5vbWFya3VwKGRhdGFNb2RlbC5oZWFkbGluZSlcbiAgICBhYnN0cmFjdE5vTWFya3VwID0gaWYgZGF0YU1vZGVsLmFic3RyYWN0IHRoZW4gdXRpbHMubm9tYXJrdXAoZGF0YU1vZGVsLmFic3RyYWN0KSBlbHNlICcnXG4gICAgZGVzY3JpcHRpb25Ob01hcmt1cCA9IGlmIGRhdGFNb2RlbC5kZXNjcmlwdGlvbiB0aGVuIHV0aWxzLm5vbWFya3VwKGRhdGFNb2RlbC5kZXNjcmlwdGlvbikgZWxzZSAnJ1xuXG4gICAgIyNTaGFyZURhdGFcbiAgICBzaGFyZURhdGEgPVxuICAgICAgICBtb2RlbDpcbiAgICAgICAgICAgIHVybDogZGF0YU1vZGVsLnVybFxuICAgICAgICAgICAgdGl0bGU6IGhlYWRsaW5lTm9NYXJrdXBcbiAgICAgICAgICAgIGFic3RyYWN0OiBhYnN0cmFjdE5vTWFya3VwXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb25Ob01hcmt1cFxuICAgICAgICAgICAgaWQ6IGRhdGFNb2RlbC5pZFxuICAgICAgICAgICAgc2hhcmVJZDogZGF0YU1vZGVsLnNoYXJlSWRcbiAgICAgICAgICAgIG1lZGlhOiBtZWRpYU9ialxuXG4gICAgcmV0dXJuICB7XG4gICAgICAgIGN1cnJlbnQ6XG4gICAgICAgICAgICBpZDogZGF0YU1vZGVsLmlkXG4gICAgICAgICAgICBoZWFkbGluZTogZGF0YU1vZGVsLmhlYWRsaW5lIHx8ICcnXG4gICAgICAgICAgICBhYnN0cmFjdDogZGF0YU1vZGVsLmFic3RyYWN0IHx8ICcnXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogKGRhdGFNb2RlbC5hYnN0cmFjdCB8fCAnJykgKyAoZGF0YU1vZGVsLmRlc2NyaXB0aW9uIHx8ICcnKVxuICAgICAgICAgICAgZGlzcGxheURhdGVUaW1lOiB1dGlscy50aW1lQWdvKGRhdGFNb2RlbC5kaXNwbGF5RGF0ZVRpbWUpXG4gICAgICAgICAgICBtZWRpYTogbWVkaWFPYmpcbiAgICAgICAgICAgIHVybDogYnVpbGRBYnNvbHV0ZVVybChkYXRhTW9kZWwudXJsKVxuICAgICAgICAgICAgdGFnczogZmlsdGVyQW5kTWFwVGFncyhkYXRhTW9kZWwudGFncykgfHwgW11cbiAgICAgICAgICAgIGF1dGhvcjogZGF0YU1vZGVsLmF1dGhvciB8fCB7fVxuICAgICAgICAgICAgbm9tYXJrdXA6XG4gICAgICAgICAgICAgICAgaGVhZGxpbmU6IGhlYWRsaW5lTm9NYXJrdXBcbiAgICAgICAgICAgICAgICBhYnN0cmFjdDogYWJzdHJhY3ROb01hcmt1cFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbk5vTWFya3VwXG4gICAgICAgICAgICBzaGFyZUlkOiB1dGlscy51dWlkKClcbiAgICAgICAgICAgIHNoYXJlRGF0YTogc2hhcmVEYXRhXG4gICAgICAgICAgICB2aWRlb0lkOiBpZiBkYXRhTW9kZWwubWVkaWEudHlwZSBpcyAndmlkZW8nIHRoZW4gdXRpbHMudXVpZCgpXG4gICAgICAgICAgICBib2R5Q29weTogZGF0YU1vZGVsLmJvZHlDb3B5XG4gICAgICAgIG5leHQ6IGdldFJlbGF0ZWREYXRhTW9kZWwoZGF0YU1vZGVsLm5leHQpXG4gICAgICAgIHByZXZpb3VzOiBnZXRSZWxhdGVkRGF0YU1vZGVsKGRhdGFNb2RlbC5wcmV2aW91cylcbiAgICAgICAgaGVhZGVyOiBkYXRhTW9kZWwuaGVhZGVyXG4gICAgICAgIHBhcnRpYWxzOiBkYXRhTW9kZWwudGVtcGxhdGVzXG4gICAgICAgIHNldHRpbmdzOiBkYXRhTW9kZWwuc2V0dGluZ3MgfHwge31cbiAgICAgICAgb3V0YnJhaW46IGRhdGFNb2RlbC5vdXRicmFpbiB8fCB7fVxuICAgICAgICBtZXRhOiBkYXRhTW9kZWwubWV0YSB8fCB7fVxuICAgICAgICB0cmFja2luZzogZGF0YU1vZGVsLnRyYWNraW5nIHx8IHt9XG4gICAgfVxuXG5tb2R1bGUuZXhwb3J0cyA9IGdldFZpZXdNb2RlbFxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vfi9jb2ZmZWVsaW50LWxvYWRlciEuL3NyYy9zY3JpcHRzL3ZpZXdNb2RlbC5jb2ZmZWVcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJtaTktdXRpbHNcIik7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiBleHRlcm5hbCBcIm1pOS11dGlsc1wiXG4gKiogbW9kdWxlIGlkID0gMTBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBqYWRlID0gcmVxdWlyZShcIi9ob21lL2FuZHJldy9Db2RlL01vZHVsZXMvbWk5LWFydGljbGUtc2VydmVyL25vZGVfbW9kdWxlcy9qYWRlL2xpYi9ydW50aW1lLmpzXCIpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHRlbXBsYXRlKGxvY2Fscykge1xudmFyIGJ1ZiA9IFtdO1xudmFyIGphZGVfbWl4aW5zID0ge307XG52YXIgamFkZV9pbnRlcnA7XG47dmFyIGxvY2Fsc19mb3Jfd2l0aCA9IChsb2NhbHMgfHwge30pOyhmdW5jdGlvbiAoY3VycmVudCwgbWV0YSwgbmV4dCwgb3V0YnJhaW4sIHBhcnRpYWxzLCBwcmV2aW91cywgc2V0dGluZ3MsIHRyYWNraW5nLCB0cmFja2luZ0xpbmtOYW1lLCB1bmRlZmluZWQpIHtcbmJ1Zi5wdXNoKFwiPGFydGljbGUgZGF0YS1tb2R1bGU9XFxcImRlY29yYXRvcnMvdHJhY2tpbmdEZWNvcmF0b3JcXFwiIGNsYXNzPVxcXCJhcnRpY2xlIG1vZHVsZSBzaG93VmlkZW9QbGF5bGlzdCBzaG93VmlkZW9QbGFjZWhvbGRlclxcXCI+PGgxIGNsYXNzPVxcXCJhcnRpY2xlX19oZWFkbGluZVxcXCI+XCIgKyAobnVsbCA9PSAoamFkZV9pbnRlcnAgPSBjdXJyZW50LmhlYWRsaW5lKSA/IFwiXCIgOiBqYWRlX2ludGVycCkgKyBcIjwvaDE+PGRpdiBjbGFzcz1cXFwiYXJ0aWNsZV9fYnlsaW5lXFxcIj5cIiArIChudWxsID09IChqYWRlX2ludGVycCA9IHBhcnRpYWxzLmF1dGhvcih7bW9kZWw6IGN1cnJlbnQuYXV0aG9yfSkpID8gXCJcIiA6IGphZGVfaW50ZXJwKSArIFwiPC9kaXY+PHNwYW4gY2xhc3M9XFxcImFydGljbGVfX3RpbWUtLWRlc2t0b3AgdGltZVxcXCI+XCIgKyAobnVsbCA9PSAoamFkZV9pbnRlcnAgPSBjdXJyZW50LmRpc3BsYXlEYXRlVGltZSkgPyBcIlwiIDogamFkZV9pbnRlcnApICsgXCI8L3NwYW4+XCIpO1xuaWYgKCBjdXJyZW50Lm1lZGlhLnR5cGUgPT0gXCJ2aWRlb1wiKVxue1xuYnVmLnB1c2gobnVsbCA9PSAoamFkZV9pbnRlcnAgPSBwYXJ0aWFscy52aWRlb0Jsb2NrKHttb2RlbDogY3VycmVudCwgcGFydGlhbHM6IHBhcnRpYWxzfSkpID8gXCJcIiA6IGphZGVfaW50ZXJwKTtcbn1cbmVsc2VcbntcbmJ1Zi5wdXNoKG51bGwgPT0gKGphZGVfaW50ZXJwID0gcGFydGlhbHMuaW1hZ2VSZXNpemVyKHttb2RlbDogY3VycmVudC5tZWRpYX0pKSA/IFwiXCIgOiBqYWRlX2ludGVycCk7XG59XG5pZiAoIGN1cnJlbnQubWVkaWEuY2FwdGlvbilcbntcbmJ1Zi5wdXNoKFwiPGRpdiBjbGFzcz1cXFwiYXJ0aWNsZV9faGVyby1jYXB0aW9uXFxcIj5cIiArIChudWxsID09IChqYWRlX2ludGVycCA9IGN1cnJlbnQubWVkaWEuY2FwdGlvbikgPyBcIlwiIDogamFkZV9pbnRlcnApICsgXCI8L2Rpdj5cIik7XG59XG5idWYucHVzaChcIjxkaXYgY2xhc3M9XFxcImFydGljbGVfX3NvY2lhbFxcXCI+XCIpO1xuaWYgKCBzZXR0aW5ncy5lbmFibGVHaWd5YVNoYXJpbmdCdXR0b25zKVxue1xuYnVmLnB1c2goXCI8ZGl2IGNsYXNzPVxcXCJhcnRpY2xlX19zaGFyZSBzaGFyZS0tcmVzcG9uc2l2ZVxcXCI+XCIgKyAobnVsbCA9PSAoamFkZV9pbnRlcnAgPSBwYXJ0aWFscy5zaGFyZShjdXJyZW50LnNoYXJlRGF0YSkpID8gXCJcIiA6IGphZGVfaW50ZXJwKSArIFwiPC9kaXY+XCIpO1xufVxuaWYgKCBzZXR0aW5ncy5lbmFibGVHaWd5YUNvbW1lbnRzKVxue1xuYnVmLnB1c2goXCI8YSBocmVmPVxcXCIjY29tbWVudHNcXFwiIGRhdGEtdHJhY2tpbmctbGluay1uYW1lPVxcXCJhcnRpY2xlX19jb21tZW50cy1qdW1wXFxcIiBjbGFzcz1cXFwiYXJ0aWNsZV9fY29tbWVudHMtanVtcFxcXCI+PGRpdiBjbGFzcz1cXFwiYXJ0aWNsZV9fY29tbWVudHMtaWNvblxcXCI+PC9kaXY+PHNwYW4+Q29tbWVudHM8L3NwYW4+PC9hPlwiKTtcbn1cbmJ1Zi5wdXNoKFwiPC9kaXY+PHNwYW4gY2xhc3M9XFxcImFydGljbGVfX3RpbWUtLW1vYmlsZSB0aW1lXFxcIj5cIiArIChudWxsID09IChqYWRlX2ludGVycCA9IGN1cnJlbnQuZGlzcGxheURhdGVUaW1lKSA/IFwiXCIgOiBqYWRlX2ludGVycCkgKyBcIjwvc3Bhbj48ZGl2IGNsYXNzPVxcXCJhcnRpY2xlX19ib2R5XFxcIj5cIiArIChudWxsID09IChqYWRlX2ludGVycCA9IGN1cnJlbnQuYm9keUNvcHkpID8gXCJcIiA6IGphZGVfaW50ZXJwKSArIFwiPC9kaXY+PHVsIGNsYXNzPVxcXCJhcnRpY2xlX190YWdzXFxcIj5cIik7XG5pZiAoIHRyYWNraW5nLnNpdGUgIT0gbnVsbClcbntcbmJ1Zi5wdXNoKFwiPGxpIGNsYXNzPVxcXCJhcnRpY2xlX190YWdcXFwiPjxhXCIgKyAoamFkZS5hdHRyKFwiaHJlZlwiLCBcIi9cIiArICh0cmFja2luZy5zaXRlKSArIFwiXCIsIHRydWUsIGZhbHNlKSkgKyBcIiBkYXRhLXRyYWNraW5nLWxpbmstbmFtZT1cXFwiYXJ0aWNsZV9zZWN0aW9uXFxcIj5cIiArIChudWxsID09IChqYWRlX2ludGVycCA9IHRyYWNraW5nLnNpdGUpID8gXCJcIiA6IGphZGVfaW50ZXJwKSArIFwiPC9hPjwvbGk+XCIpO1xufVxuLy8gaXRlcmF0ZSBjdXJyZW50LnRhZ3NcbjsoZnVuY3Rpb24oKXtcbiAgdmFyICQkb2JqID0gY3VycmVudC50YWdzO1xuICBpZiAoJ251bWJlcicgPT0gdHlwZW9mICQkb2JqLmxlbmd0aCkge1xuXG4gICAgZm9yICh2YXIgJGluZGV4ID0gMCwgJCRsID0gJCRvYmoubGVuZ3RoOyAkaW5kZXggPCAkJGw7ICRpbmRleCsrKSB7XG4gICAgICB2YXIgdGFnID0gJCRvYmpbJGluZGV4XTtcblxuYnVmLnB1c2goXCI8bGkgY2xhc3M9XFxcImFydGljbGVfX3RhZ1xcXCI+PGFcIiArIChqYWRlLmF0dHIoXCJocmVmXCIsIFwiL1wiICsgKHRhZy51cmwpICsgXCJcIiwgdHJ1ZSwgZmFsc2UpKSArIFwiIGRhdGEtdHJhY2tpbmctbGluay1uYW1lPVxcXCJhcnRpY2xlX190YWdcXFwiPlwiICsgKG51bGwgPT0gKGphZGVfaW50ZXJwID0gdGFnLm5hbWUpID8gXCJcIiA6IGphZGVfaW50ZXJwKSArIFwiPC9hPjwvbGk+XCIpO1xuICAgIH1cblxuICB9IGVsc2Uge1xuICAgIHZhciAkJGwgPSAwO1xuICAgIGZvciAodmFyICRpbmRleCBpbiAkJG9iaikge1xuICAgICAgJCRsKys7ICAgICAgdmFyIHRhZyA9ICQkb2JqWyRpbmRleF07XG5cbmJ1Zi5wdXNoKFwiPGxpIGNsYXNzPVxcXCJhcnRpY2xlX190YWdcXFwiPjxhXCIgKyAoamFkZS5hdHRyKFwiaHJlZlwiLCBcIi9cIiArICh0YWcudXJsKSArIFwiXCIsIHRydWUsIGZhbHNlKSkgKyBcIiBkYXRhLXRyYWNraW5nLWxpbmstbmFtZT1cXFwiYXJ0aWNsZV9fdGFnXFxcIj5cIiArIChudWxsID09IChqYWRlX2ludGVycCA9IHRhZy5uYW1lKSA/IFwiXCIgOiBqYWRlX2ludGVycCkgKyBcIjwvYT48L2xpPlwiKTtcbiAgICB9XG5cbiAgfVxufSkuY2FsbCh0aGlzKTtcblxuYnVmLnB1c2goXCI8L3VsPjxkaXYgY2xhc3M9XFxcImFydGljbGVfX3JlbGF0ZWRcXFwiPlwiKTtcbmlmICggcHJldmlvdXMpXG57XG5idWYucHVzaChcIjxkaXYgY2xhc3M9XFxcImFydGljbGVfX3JlbGF0ZWQtaXRlbSBhcnRpY2xlX19yZWxhdGVkLWl0ZW0tLXByZXZpb3VzXFxcIj48aDM+UHJldmlvdXM8L2gzPlwiICsgKG51bGwgPT0gKGphZGVfaW50ZXJwID0gcGFydGlhbHMucmVsYXRlZCh7dHJhY2tpbmdMaW5rTmFtZTogJ2FydGljbGVfcHJldmlvdXMnLCBtb2RlbDogcHJldmlvdXMsIHBhcnRpYWxzOiBwYXJ0aWFsc30pKSA/IFwiXCIgOiBqYWRlX2ludGVycCkgKyBcIjwvZGl2PlwiKTtcbn1cbmlmICggbmV4dClcbntcbnRyYWNraW5nTGlua05hbWUgPSAnYXJ0aWNsZV9uZXh0J1xuYnVmLnB1c2goXCI8ZGl2IGNsYXNzPVxcXCJhcnRpY2xlX19yZWxhdGVkLWl0ZW0gYXJ0aWNsZV9fcmVsYXRlZC1pdGVtLS1uZXh0XFxcIj48aDM+TmV4dDwvaDM+XCIgKyAobnVsbCA9PSAoamFkZV9pbnRlcnAgPSBwYXJ0aWFscy5yZWxhdGVkKHt0cmFja2luZ0xpbmtOYW1lOiAnYXJ0aWNsZV9uZXh0JywgbW9kZWw6IG5leHQsIHBhcnRpYWxzOiBwYXJ0aWFsc30pKSA/IFwiXCIgOiBqYWRlX2ludGVycCkgKyBcIjwvZGl2PlwiKTtcbn1cbmJ1Zi5wdXNoKFwiPC9kaXY+XCIpO1xuaWYgKCBzZXR0aW5ncy5lbmFibGVPdXRicmFpblJlY29tbWVuZGVkKVxue1xuYnVmLnB1c2goXCI8ZGl2IGNsYXNzPVxcXCJhcnRpY2xlX19vdXRicmFpblxcXCI+XCIgKyAobnVsbCA9PSAoamFkZV9pbnRlcnAgPSBwYXJ0aWFscy5vdXRicmFpbih7bW9kZWw6IHt1cmw6IG1ldGEudXJsLCB3aWRnZXRJZDogb3V0YnJhaW4ud2lkZ2V0SWQsIG9iVGVtcGxhdGU6IG91dGJyYWluLm9iVGVtcGxhdGV9fSkpID8gXCJcIiA6IGphZGVfaW50ZXJwKSArIFwiPC9kaXY+XCIpO1xufVxuaWYgKCBzZXR0aW5ncy5lbmFibGVHaWd5YUNvbW1lbnRzKVxue1xuYnVmLnB1c2goXCI8ZGl2IGlkPVxcXCJjb21tZW50c1xcXCIgY2xhc3M9XFxcImFydGljbGVfX2NvbW1lbnRzXFxcIj48aDMgY2xhc3M9XFxcImFydGljbGVfY29tbWVudHMtaGVhZGVyXFxcIj5Qb3N0IGEgY29tbWVudCBvbiB0aGlzIHN0b3J5PC9oMz5cIiArIChudWxsID09IChqYWRlX2ludGVycCA9IHBhcnRpYWxzLmNvbW1lbnRzKHttb2RlbDoge2lkOiBjdXJyZW50LmlkLCB1cmw6IGN1cnJlbnQudXJsLCBzaXRlbmFtZTogbWV0YS5zaXRlbmFtZX19KSkgPyBcIlwiIDogamFkZV9pbnRlcnApICsgXCI8L2Rpdj5cIik7XG59XG5idWYucHVzaChcIjwvYXJ0aWNsZT5cIik7fS5jYWxsKHRoaXMsXCJjdXJyZW50XCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC5jdXJyZW50OnR5cGVvZiBjdXJyZW50IT09XCJ1bmRlZmluZWRcIj9jdXJyZW50OnVuZGVmaW5lZCxcIm1ldGFcIiBpbiBsb2NhbHNfZm9yX3dpdGg/bG9jYWxzX2Zvcl93aXRoLm1ldGE6dHlwZW9mIG1ldGEhPT1cInVuZGVmaW5lZFwiP21ldGE6dW5kZWZpbmVkLFwibmV4dFwiIGluIGxvY2Fsc19mb3Jfd2l0aD9sb2NhbHNfZm9yX3dpdGgubmV4dDp0eXBlb2YgbmV4dCE9PVwidW5kZWZpbmVkXCI/bmV4dDp1bmRlZmluZWQsXCJvdXRicmFpblwiIGluIGxvY2Fsc19mb3Jfd2l0aD9sb2NhbHNfZm9yX3dpdGgub3V0YnJhaW46dHlwZW9mIG91dGJyYWluIT09XCJ1bmRlZmluZWRcIj9vdXRicmFpbjp1bmRlZmluZWQsXCJwYXJ0aWFsc1wiIGluIGxvY2Fsc19mb3Jfd2l0aD9sb2NhbHNfZm9yX3dpdGgucGFydGlhbHM6dHlwZW9mIHBhcnRpYWxzIT09XCJ1bmRlZmluZWRcIj9wYXJ0aWFsczp1bmRlZmluZWQsXCJwcmV2aW91c1wiIGluIGxvY2Fsc19mb3Jfd2l0aD9sb2NhbHNfZm9yX3dpdGgucHJldmlvdXM6dHlwZW9mIHByZXZpb3VzIT09XCJ1bmRlZmluZWRcIj9wcmV2aW91czp1bmRlZmluZWQsXCJzZXR0aW5nc1wiIGluIGxvY2Fsc19mb3Jfd2l0aD9sb2NhbHNfZm9yX3dpdGguc2V0dGluZ3M6dHlwZW9mIHNldHRpbmdzIT09XCJ1bmRlZmluZWRcIj9zZXR0aW5nczp1bmRlZmluZWQsXCJ0cmFja2luZ1wiIGluIGxvY2Fsc19mb3Jfd2l0aD9sb2NhbHNfZm9yX3dpdGgudHJhY2tpbmc6dHlwZW9mIHRyYWNraW5nIT09XCJ1bmRlZmluZWRcIj90cmFja2luZzp1bmRlZmluZWQsXCJ0cmFja2luZ0xpbmtOYW1lXCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC50cmFja2luZ0xpbmtOYW1lOnR5cGVvZiB0cmFja2luZ0xpbmtOYW1lIT09XCJ1bmRlZmluZWRcIj90cmFja2luZ0xpbmtOYW1lOnVuZGVmaW5lZCxcInVuZGVmaW5lZFwiIGluIGxvY2Fsc19mb3Jfd2l0aD9sb2NhbHNfZm9yX3dpdGgudW5kZWZpbmVkOnR5cGVvZiB1bmRlZmluZWQhPT1cInVuZGVmaW5lZFwiP3VuZGVmaW5lZDp1bmRlZmluZWQpKTs7cmV0dXJuIGJ1Zi5qb2luKFwiXCIpO1xufVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvdGVtcGxhdGVzL2FydGljbGUuamFkZVxuICoqIG1vZHVsZSBpZCA9IDExXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogTWVyZ2UgdHdvIGF0dHJpYnV0ZSBvYmplY3RzIGdpdmluZyBwcmVjZWRlbmNlXG4gKiB0byB2YWx1ZXMgaW4gb2JqZWN0IGBiYC4gQ2xhc3NlcyBhcmUgc3BlY2lhbC1jYXNlZFxuICogYWxsb3dpbmcgZm9yIGFycmF5cyBhbmQgbWVyZ2luZy9qb2luaW5nIGFwcHJvcHJpYXRlbHlcbiAqIHJlc3VsdGluZyBpbiBhIHN0cmluZy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gYVxuICogQHBhcmFtIHtPYmplY3R9IGJcbiAqIEByZXR1cm4ge09iamVjdH0gYVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZXhwb3J0cy5tZXJnZSA9IGZ1bmN0aW9uIG1lcmdlKGEsIGIpIHtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICB2YXIgYXR0cnMgPSBhWzBdO1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYS5sZW5ndGg7IGkrKykge1xuICAgICAgYXR0cnMgPSBtZXJnZShhdHRycywgYVtpXSk7XG4gICAgfVxuICAgIHJldHVybiBhdHRycztcbiAgfVxuICB2YXIgYWMgPSBhWydjbGFzcyddO1xuICB2YXIgYmMgPSBiWydjbGFzcyddO1xuXG4gIGlmIChhYyB8fCBiYykge1xuICAgIGFjID0gYWMgfHwgW107XG4gICAgYmMgPSBiYyB8fCBbXTtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoYWMpKSBhYyA9IFthY107XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGJjKSkgYmMgPSBbYmNdO1xuICAgIGFbJ2NsYXNzJ10gPSBhYy5jb25jYXQoYmMpLmZpbHRlcihudWxscyk7XG4gIH1cblxuICBmb3IgKHZhciBrZXkgaW4gYikge1xuICAgIGlmIChrZXkgIT0gJ2NsYXNzJykge1xuICAgICAgYVtrZXldID0gYltrZXldO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBhO1xufTtcblxuLyoqXG4gKiBGaWx0ZXIgbnVsbCBgdmFsYHMuXG4gKlxuICogQHBhcmFtIHsqfSB2YWxcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBudWxscyh2YWwpIHtcbiAgcmV0dXJuIHZhbCAhPSBudWxsICYmIHZhbCAhPT0gJyc7XG59XG5cbi8qKlxuICogam9pbiBhcnJheSBhcyBjbGFzc2VzLlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cbmV4cG9ydHMuam9pbkNsYXNzZXMgPSBqb2luQ2xhc3NlcztcbmZ1bmN0aW9uIGpvaW5DbGFzc2VzKHZhbCkge1xuICByZXR1cm4gKEFycmF5LmlzQXJyYXkodmFsKSA/IHZhbC5tYXAoam9pbkNsYXNzZXMpIDpcbiAgICAodmFsICYmIHR5cGVvZiB2YWwgPT09ICdvYmplY3QnKSA/IE9iamVjdC5rZXlzKHZhbCkuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIHZhbFtrZXldOyB9KSA6XG4gICAgW3ZhbF0pLmZpbHRlcihudWxscykuam9pbignICcpO1xufVxuXG4vKipcbiAqIFJlbmRlciB0aGUgZ2l2ZW4gY2xhc3Nlcy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBjbGFzc2VzXG4gKiBAcGFyYW0ge0FycmF5LjxCb29sZWFuPn0gZXNjYXBlZFxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5leHBvcnRzLmNscyA9IGZ1bmN0aW9uIGNscyhjbGFzc2VzLCBlc2NhcGVkKSB7XG4gIHZhciBidWYgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBjbGFzc2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGVzY2FwZWQgJiYgZXNjYXBlZFtpXSkge1xuICAgICAgYnVmLnB1c2goZXhwb3J0cy5lc2NhcGUoam9pbkNsYXNzZXMoW2NsYXNzZXNbaV1dKSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBidWYucHVzaChqb2luQ2xhc3NlcyhjbGFzc2VzW2ldKSk7XG4gICAgfVxuICB9XG4gIHZhciB0ZXh0ID0gam9pbkNsYXNzZXMoYnVmKTtcbiAgaWYgKHRleHQubGVuZ3RoKSB7XG4gICAgcmV0dXJuICcgY2xhc3M9XCInICsgdGV4dCArICdcIic7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG59O1xuXG5cbmV4cG9ydHMuc3R5bGUgPSBmdW5jdGlvbiAodmFsKSB7XG4gIGlmICh2YWwgJiYgdHlwZW9mIHZhbCA9PT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXModmFsKS5tYXAoZnVuY3Rpb24gKHN0eWxlKSB7XG4gICAgICByZXR1cm4gc3R5bGUgKyAnOicgKyB2YWxbc3R5bGVdO1xuICAgIH0pLmpvaW4oJzsnKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdmFsO1xuICB9XG59O1xuLyoqXG4gKiBSZW5kZXIgdGhlIGdpdmVuIGF0dHJpYnV0ZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKiBAcGFyYW0ge1N0cmluZ30gdmFsXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGVzY2FwZWRcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gdGVyc2VcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuZXhwb3J0cy5hdHRyID0gZnVuY3Rpb24gYXR0cihrZXksIHZhbCwgZXNjYXBlZCwgdGVyc2UpIHtcbiAgaWYgKGtleSA9PT0gJ3N0eWxlJykge1xuICAgIHZhbCA9IGV4cG9ydHMuc3R5bGUodmFsKTtcbiAgfVxuICBpZiAoJ2Jvb2xlYW4nID09IHR5cGVvZiB2YWwgfHwgbnVsbCA9PSB2YWwpIHtcbiAgICBpZiAodmFsKSB7XG4gICAgICByZXR1cm4gJyAnICsgKHRlcnNlID8ga2V5IDoga2V5ICsgJz1cIicgKyBrZXkgKyAnXCInKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgfSBlbHNlIGlmICgwID09IGtleS5pbmRleE9mKCdkYXRhJykgJiYgJ3N0cmluZycgIT0gdHlwZW9mIHZhbCkge1xuICAgIGlmIChKU09OLnN0cmluZ2lmeSh2YWwpLmluZGV4T2YoJyYnKSAhPT0gLTEpIHtcbiAgICAgIGNvbnNvbGUud2FybignU2luY2UgSmFkZSAyLjAuMCwgYW1wZXJzYW5kcyAoYCZgKSBpbiBkYXRhIGF0dHJpYnV0ZXMgJyArXG4gICAgICAgICAgICAgICAgICAgJ3dpbGwgYmUgZXNjYXBlZCB0byBgJmFtcDtgJyk7XG4gICAgfTtcbiAgICBpZiAodmFsICYmIHR5cGVvZiB2YWwudG9JU09TdHJpbmcgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGNvbnNvbGUud2FybignSmFkZSB3aWxsIGVsaW1pbmF0ZSB0aGUgZG91YmxlIHF1b3RlcyBhcm91bmQgZGF0ZXMgaW4gJyArXG4gICAgICAgICAgICAgICAgICAgJ0lTTyBmb3JtIGFmdGVyIDIuMC4wJyk7XG4gICAgfVxuICAgIHJldHVybiAnICcgKyBrZXkgKyBcIj0nXCIgKyBKU09OLnN0cmluZ2lmeSh2YWwpLnJlcGxhY2UoLycvZywgJyZhcG9zOycpICsgXCInXCI7XG4gIH0gZWxzZSBpZiAoZXNjYXBlZCkge1xuICAgIGlmICh2YWwgJiYgdHlwZW9mIHZhbC50b0lTT1N0cmluZyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgY29uc29sZS53YXJuKCdKYWRlIHdpbGwgc3RyaW5naWZ5IGRhdGVzIGluIElTTyBmb3JtIGFmdGVyIDIuMC4wJyk7XG4gICAgfVxuICAgIHJldHVybiAnICcgKyBrZXkgKyAnPVwiJyArIGV4cG9ydHMuZXNjYXBlKHZhbCkgKyAnXCInO1xuICB9IGVsc2Uge1xuICAgIGlmICh2YWwgJiYgdHlwZW9mIHZhbC50b0lTT1N0cmluZyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgY29uc29sZS53YXJuKCdKYWRlIHdpbGwgc3RyaW5naWZ5IGRhdGVzIGluIElTTyBmb3JtIGFmdGVyIDIuMC4wJyk7XG4gICAgfVxuICAgIHJldHVybiAnICcgKyBrZXkgKyAnPVwiJyArIHZhbCArICdcIic7XG4gIH1cbn07XG5cbi8qKlxuICogUmVuZGVyIHRoZSBnaXZlbiBhdHRyaWJ1dGVzIG9iamVjdC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcGFyYW0ge09iamVjdH0gZXNjYXBlZFxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5leHBvcnRzLmF0dHJzID0gZnVuY3Rpb24gYXR0cnMob2JqLCB0ZXJzZSl7XG4gIHZhciBidWYgPSBbXTtcblxuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iaik7XG5cbiAgaWYgKGtleXMubGVuZ3RoKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIga2V5ID0ga2V5c1tpXVxuICAgICAgICAsIHZhbCA9IG9ialtrZXldO1xuXG4gICAgICBpZiAoJ2NsYXNzJyA9PSBrZXkpIHtcbiAgICAgICAgaWYgKHZhbCA9IGpvaW5DbGFzc2VzKHZhbCkpIHtcbiAgICAgICAgICBidWYucHVzaCgnICcgKyBrZXkgKyAnPVwiJyArIHZhbCArICdcIicpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBidWYucHVzaChleHBvcnRzLmF0dHIoa2V5LCB2YWwsIGZhbHNlLCB0ZXJzZSkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBidWYuam9pbignJyk7XG59O1xuXG4vKipcbiAqIEVzY2FwZSB0aGUgZ2l2ZW4gc3RyaW5nIG9mIGBodG1sYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gaHRtbFxuICogQHJldHVybiB7U3RyaW5nfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxudmFyIGphZGVfZW5jb2RlX2h0bWxfcnVsZXMgPSB7XG4gICcmJzogJyZhbXA7JyxcbiAgJzwnOiAnJmx0OycsXG4gICc+JzogJyZndDsnLFxuICAnXCInOiAnJnF1b3Q7J1xufTtcbnZhciBqYWRlX21hdGNoX2h0bWwgPSAvWyY8PlwiXS9nO1xuXG5mdW5jdGlvbiBqYWRlX2VuY29kZV9jaGFyKGMpIHtcbiAgcmV0dXJuIGphZGVfZW5jb2RlX2h0bWxfcnVsZXNbY10gfHwgYztcbn1cblxuZXhwb3J0cy5lc2NhcGUgPSBqYWRlX2VzY2FwZTtcbmZ1bmN0aW9uIGphZGVfZXNjYXBlKGh0bWwpe1xuICB2YXIgcmVzdWx0ID0gU3RyaW5nKGh0bWwpLnJlcGxhY2UoamFkZV9tYXRjaF9odG1sLCBqYWRlX2VuY29kZV9jaGFyKTtcbiAgaWYgKHJlc3VsdCA9PT0gJycgKyBodG1sKSByZXR1cm4gaHRtbDtcbiAgZWxzZSByZXR1cm4gcmVzdWx0O1xufTtcblxuLyoqXG4gKiBSZS10aHJvdyB0aGUgZ2l2ZW4gYGVycmAgaW4gY29udGV4dCB0byB0aGVcbiAqIHRoZSBqYWRlIGluIGBmaWxlbmFtZWAgYXQgdGhlIGdpdmVuIGBsaW5lbm9gLlxuICpcbiAqIEBwYXJhbSB7RXJyb3J9IGVyclxuICogQHBhcmFtIHtTdHJpbmd9IGZpbGVuYW1lXG4gKiBAcGFyYW0ge1N0cmluZ30gbGluZW5vXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5leHBvcnRzLnJldGhyb3cgPSBmdW5jdGlvbiByZXRocm93KGVyciwgZmlsZW5hbWUsIGxpbmVubywgc3RyKXtcbiAgaWYgKCEoZXJyIGluc3RhbmNlb2YgRXJyb3IpKSB0aHJvdyBlcnI7XG4gIGlmICgodHlwZW9mIHdpbmRvdyAhPSAndW5kZWZpbmVkJyB8fCAhZmlsZW5hbWUpICYmICFzdHIpIHtcbiAgICBlcnIubWVzc2FnZSArPSAnIG9uIGxpbmUgJyArIGxpbmVubztcbiAgICB0aHJvdyBlcnI7XG4gIH1cbiAgdHJ5IHtcbiAgICBzdHIgPSBzdHIgfHwgcmVxdWlyZSgnZnMnKS5yZWFkRmlsZVN5bmMoZmlsZW5hbWUsICd1dGY4JylcbiAgfSBjYXRjaCAoZXgpIHtcbiAgICByZXRocm93KGVyciwgbnVsbCwgbGluZW5vKVxuICB9XG4gIHZhciBjb250ZXh0ID0gM1xuICAgICwgbGluZXMgPSBzdHIuc3BsaXQoJ1xcbicpXG4gICAgLCBzdGFydCA9IE1hdGgubWF4KGxpbmVubyAtIGNvbnRleHQsIDApXG4gICAgLCBlbmQgPSBNYXRoLm1pbihsaW5lcy5sZW5ndGgsIGxpbmVubyArIGNvbnRleHQpO1xuXG4gIC8vIEVycm9yIGNvbnRleHRcbiAgdmFyIGNvbnRleHQgPSBsaW5lcy5zbGljZShzdGFydCwgZW5kKS5tYXAoZnVuY3Rpb24obGluZSwgaSl7XG4gICAgdmFyIGN1cnIgPSBpICsgc3RhcnQgKyAxO1xuICAgIHJldHVybiAoY3VyciA9PSBsaW5lbm8gPyAnICA+ICcgOiAnICAgICcpXG4gICAgICArIGN1cnJcbiAgICAgICsgJ3wgJ1xuICAgICAgKyBsaW5lO1xuICB9KS5qb2luKCdcXG4nKTtcblxuICAvLyBBbHRlciBleGNlcHRpb24gbWVzc2FnZVxuICBlcnIucGF0aCA9IGZpbGVuYW1lO1xuICBlcnIubWVzc2FnZSA9IChmaWxlbmFtZSB8fCAnSmFkZScpICsgJzonICsgbGluZW5vXG4gICAgKyAnXFxuJyArIGNvbnRleHQgKyAnXFxuXFxuJyArIGVyci5tZXNzYWdlO1xuICB0aHJvdyBlcnI7XG59O1xuXG5leHBvcnRzLkRlYnVnSXRlbSA9IGZ1bmN0aW9uIERlYnVnSXRlbShsaW5lbm8sIGZpbGVuYW1lKSB7XG4gIHRoaXMubGluZW5vID0gbGluZW5vO1xuICB0aGlzLmZpbGVuYW1lID0gZmlsZW5hbWU7XG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9qYWRlL2xpYi9ydW50aW1lLmpzXG4gKiogbW9kdWxlIGlkID0gMTJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImZzXCIpO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogZXh0ZXJuYWwgXCJmc1wiXG4gKiogbW9kdWxlIGlkID0gMTNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBqYWRlID0gcmVxdWlyZShcIi9ob21lL2FuZHJldy9Db2RlL01vZHVsZXMvbWk5LWFydGljbGUtc2VydmVyL25vZGVfbW9kdWxlcy9qYWRlL2xpYi9ydW50aW1lLmpzXCIpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHRlbXBsYXRlKGxvY2Fscykge1xudmFyIGJ1ZiA9IFtdO1xudmFyIGphZGVfbWl4aW5zID0ge307XG52YXIgamFkZV9pbnRlcnA7XG47dmFyIGxvY2Fsc19mb3Jfd2l0aCA9IChsb2NhbHMgfHwge30pOyhmdW5jdGlvbiAobW9kZWwpIHtcbmJ1Zi5wdXNoKFwiPGRpdlwiICsgKGphZGUuYXR0cihcImlkXCIsIG1vZGVsLmlkLCB0cnVlLCBmYWxzZSkpICsgXCIgZGF0YS1tb2R1bGU9XFxcImRlY29yYXRvcnMvY29tbWVudHNEZWNvcmF0b3JcXFwiXCIgKyAoamFkZS5hdHRyKFwiZGF0YS1jYXRlZ29yeS1pZFwiLCBtb2RlbC5zaXRlbmFtZSwgdHJ1ZSwgZmFsc2UpKSArIChqYWRlLmF0dHIoXCJkYXRhLXN0cmVhbS1pZFwiLCBtb2RlbC51cmwsIHRydWUsIGZhbHNlKSkgKyBcIiBjbGFzcz1cXFwiY29tbWVudHMgbW9kdWxlXFxcIj48L2Rpdj5cIik7fS5jYWxsKHRoaXMsXCJtb2RlbFwiIGluIGxvY2Fsc19mb3Jfd2l0aD9sb2NhbHNfZm9yX3dpdGgubW9kZWw6dHlwZW9mIG1vZGVsIT09XCJ1bmRlZmluZWRcIj9tb2RlbDp1bmRlZmluZWQpKTs7cmV0dXJuIGJ1Zi5qb2luKFwiXCIpO1xufVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvdGVtcGxhdGVzL2NvbW1lbnRzLmphZGVcbiAqKiBtb2R1bGUgaWQgPSAxNFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGphZGUgPSByZXF1aXJlKFwiL2hvbWUvYW5kcmV3L0NvZGUvTW9kdWxlcy9taTktYXJ0aWNsZS1zZXJ2ZXIvbm9kZV9tb2R1bGVzL2phZGUvbGliL3J1bnRpbWUuanNcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdGVtcGxhdGUobG9jYWxzKSB7XG52YXIgYnVmID0gW107XG52YXIgamFkZV9taXhpbnMgPSB7fTtcbnZhciBqYWRlX2ludGVycDtcbjt2YXIgbG9jYWxzX2Zvcl93aXRoID0gKGxvY2FscyB8fCB7fSk7KGZ1bmN0aW9uIChtb2RlbCwgcGFydGlhbHMpIHtcbmJ1Zi5wdXNoKFwiPGFcIiArIChqYWRlLmF0dHIoXCJocmVmXCIsIG1vZGVsLnVybCwgdHJ1ZSwgZmFsc2UpKSArIChqYWRlLmF0dHIoXCJkYXRhLXRyYWNraW5nLWxpbmstbmFtZVwiLCBtb2RlbC50cmFja2luZ0xpbmtOYW1lLCB0cnVlLCBmYWxzZSkpICsgXCIgY2xhc3M9XFxcInJlbGF0ZWQgaGVhZGluZy1saW5rXFxcIj5cIik7XG5pZiAoIG1vZGVsLm1lZGlhKVxue1xuYnVmLnB1c2goXCI8ZGl2IGNsYXNzPVxcXCJyZWxhdGVkX19pbWFnZVxcXCI+XCIgKyAobnVsbCA9PSAoamFkZV9pbnRlcnAgPSBwYXJ0aWFscy5pbWFnZVJlc2l6ZXIoe21vZGVsOiBtb2RlbC5tZWRpYX0pKSA/IFwiXCIgOiBqYWRlX2ludGVycCkgKyBcIjwvZGl2PjxkaXYgY2xhc3M9XFxcInJlbGF0ZWRfX2hlYWRpbmdcXFwiPlwiICsgKG51bGwgPT0gKGphZGVfaW50ZXJwID0gbW9kZWwubWVkaWEuaGVhZGxpbmUpID8gXCJcIiA6IGphZGVfaW50ZXJwKSArIFwiPC9kaXY+XCIpO1xufVxuYnVmLnB1c2goXCI8L2E+XCIpO30uY2FsbCh0aGlzLFwibW9kZWxcIiBpbiBsb2NhbHNfZm9yX3dpdGg/bG9jYWxzX2Zvcl93aXRoLm1vZGVsOnR5cGVvZiBtb2RlbCE9PVwidW5kZWZpbmVkXCI/bW9kZWw6dW5kZWZpbmVkLFwicGFydGlhbHNcIiBpbiBsb2NhbHNfZm9yX3dpdGg/bG9jYWxzX2Zvcl93aXRoLnBhcnRpYWxzOnR5cGVvZiBwYXJ0aWFscyE9PVwidW5kZWZpbmVkXCI/cGFydGlhbHM6dW5kZWZpbmVkKSk7O3JldHVybiBidWYuam9pbihcIlwiKTtcbn1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL3RlbXBsYXRlcy9yZWxhdGVkLmphZGVcbiAqKiBtb2R1bGUgaWQgPSAxNVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==