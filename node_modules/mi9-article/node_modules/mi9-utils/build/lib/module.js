module.exports =
/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;
/******/
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/*!**********************************!*\
  !*** ./src/scripts/index.coffee ***!
  \**********************************/
/***/ function(module, exports, __webpack_require__) {

	module.exports = __webpack_require__(/*! ./utils */ 1);


/***/ },
/* 1 */
/*!**********************************!*\
  !*** ./src/scripts/utils.coffee ***!
  \**********************************/
/***/ function(module, exports, __webpack_require__) {

	var Breakpoints, DATE_ERROR, _, absoluteUrl, moment, stripBasePath, tz, unitize, url, uuid;
	
	_ = __webpack_require__(/*! lodash */ 2);
	
	moment = __webpack_require__(/*! moment */ 3);
	
	tz = __webpack_require__(/*! moment-timezone */ 4);
	
	uuid = __webpack_require__(/*! node-uuid */ 5);
	
	unitize = __webpack_require__(/*! unitize */ 6);
	
	url = __webpack_require__(/*! url */ 7);
	
	Breakpoints = __webpack_require__(/*! mi9-breakpoints-common */ 8);
	
	DATE_ERROR = 'Invalid Date';
	
	stripBasePath = function(path, base) {
	  if (typeof path === 'string') {
	    path = path.replace(base.replace(/\/*$/, '/'), '');
	  }
	  return path;
	};
	
	absoluteUrl = function(path, domain) {
	  path = path.replace(/^\/*/, '');
	  domain = domain.replace(/\/*$/, '');
	  if (!domain.match(/^http(s?):\/\//)) {
	    domain = "//" + domain;
	  }
	  return domain + "/" + path;
	};
	
	module.exports = {
	  uuid: function() {
	    return uuid.v4();
	  },
	  limit: function(items, limit) {
	    if (items != null) {
	      return items.slice(0, limit);
	    }
	  },
	  timeAgo: function(timestamp) {
	    var datetime, daysDiff, time;
	    datetime = new Date(timestamp);
	    if (datetime === DATE_ERROR) {
	      return '';
	    }
	    time = moment(datetime);
	    daysDiff = moment().diff(time, 'days');
	    if (daysDiff < 14) {
	      return time.fromNow();
	    } else {
	      return time.format('MMM Do, YYYY');
	    }
	  },
	  ticksAgo: function(ticks, format, relativeTime) {
	    var daysDiff, time;
	    if (format == null) {
	      format = 'MMM Do, YYYY';
	    }
	    if (relativeTime == null) {
	      relativeTime = null;
	    }
	    if (relativeTime) {
	      moment.local('en', {
	        relativeTime: relativeTime
	      });
	    }
	    time = moment(new Date(ticks));
	    daysDiff = moment().diff(time, 'days');
	    if (daysDiff < 14) {
	      return time.fromNow();
	    } else {
	      return time.format(format);
	    }
	  },
	  currentDate: function(format) {
	    var now;
	    now = tz(moment());
	    return now.tz('Australia/Sydney').format(format);
	  },
	  formatDate: function(date, format) {
	    var datetime;
	    datetime = new Date(date);
	    if (datetime === DATE_ERROR) {
	      return '';
	    }
	    return moment(datetime).format(format);
	  },
	  domain: function(urlStr) {
	    var domainExpr;
	    domainExpr = /^((?:https?\:\/\/)?(?:[a-z0-9-_]+\.)*[a-z0-9-_]+\.?(?::([0-9]+))?)/i;
	    if (domainExpr.test(urlStr)) {
	      return (urlStr.match(domainExpr))[1];
	    }
	  },
	  resizeImage: function(width, src) {
	    return "http://images.ninemsn.com.au/resizer.aspx?width=" + (width.toString()) + "&url=" + (encodeURI(src));
	  },
	  add: function(value, addition) {
	    return value + addition;
	  },
	  lowerCase: function(text) {
	    if (typeof text === 'string') {
	      return text.toLowerCase();
	    }
	  },
	  contentUrlBuilder: function(arg) {
	    var base, domain, url;
	    url = arg.url, domain = arg.domain, base = arg.base;
	    if (base) {
	      url = stripBasePath(url, base);
	    }
	    if (domain) {
	      url = absoluteUrl(url, domain);
	    }
	    return url;
	  },
	  toAbsoluteUrl: absoluteUrl,
	  nomarkup: function(html) {
	    return html != null ? html.replace(/<.+?>/g, '') : void 0;
	  },
	  pageTitle: function(title, defaultTitle, titleDecoration) {
	    if (title) {
	      return (exports.nomarkup(title)) + " " + titleDecoration;
	    } else {
	      return defaultTitle;
	    }
	  },
	  aspectRatio: function(height, width) {
	    return (height / width) * 100;
	  },
	  imageAspect: function(width, height) {
	    var aspect;
	    return aspect = width / height;
	  },
	  utcToLocalTimezone: function(utc) {
	    var datetime;
	    datetime = new Date(utc);
	    if (datetime === DATE_ERROR) {
	      return '';
	    }
	    return moment(datetime).tz(env.get('meta:timezone')).format();
	  },
	  unitize: function(num) {
	    return unitize(num).precision(1).toString().replace(/\ /g, '');
	  },
	  breakpoint: function(size, type) {
	    var breakpoints, ref;
	    breakpoints = new Breakpoints();
	    return (ref = breakpoints[size]) != null ? ref[type] : void 0;
	  },
	  showVideoBlock: function(content) {
	    var heroIsVideo, isArticle, ref, ref1, ref2;
	    isArticle = (content != null ? (ref = content.templateName) != null ? ref.toLowerCase() : void 0 : void 0) === 'article';
	    heroIsVideo = (content != null ? (ref1 = content.media) != null ? (ref2 = ref1[0]) != null ? ref2.type : void 0 : void 0 : void 0) === 'video';
	    return isArticle && heroIsVideo;
	  }
	};


/***/ },
/* 2 */
/*!*************************!*\
  !*** external "lodash" ***!
  \*************************/
/***/ function(module, exports) {

	module.exports = require("lodash");

/***/ },
/* 3 */
/*!*************************!*\
  !*** external "moment" ***!
  \*************************/
/***/ function(module, exports) {

	module.exports = require("moment");

/***/ },
/* 4 */
/*!**********************************!*\
  !*** external "moment-timezone" ***!
  \**********************************/
/***/ function(module, exports) {

	module.exports = require("moment-timezone");

/***/ },
/* 5 */
/*!****************************!*\
  !*** external "node-uuid" ***!
  \****************************/
/***/ function(module, exports) {

	module.exports = require("node-uuid");

/***/ },
/* 6 */
/*!**************************!*\
  !*** external "unitize" ***!
  \**************************/
/***/ function(module, exports) {

	module.exports = require("unitize");

/***/ },
/* 7 */
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ function(module, exports) {

	module.exports = require("url");

/***/ },
/* 8 */
/*!*****************************************!*\
  !*** external "mi9-breakpoints-common" ***!
  \*****************************************/
/***/ function(module, exports) {

	module.exports = require("mi9-breakpoints-common");

/***/ }
/******/ ]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vbm9kZV9tb2R1bGVzL21pOS11dGlscy93ZWJwYWNrL2Jvb3RzdHJhcCA2MzRhYzc1ZGFjZWI4NjZiODU4NSIsIndlYnBhY2s6Ly8vbm9kZV9tb2R1bGVzL21pOS11dGlscy8uL3NyYy9zY3JpcHRzL2luZGV4LmNvZmZlZSIsIndlYnBhY2s6Ly8vbm9kZV9tb2R1bGVzL21pOS11dGlscy8uL3NyYy9zY3JpcHRzL3V0aWxzLmNvZmZlZSIsIndlYnBhY2s6Ly8vbm9kZV9tb2R1bGVzL21pOS11dGlscy9leHRlcm5hbCBcImxvZGFzaFwiIiwid2VicGFjazovLy9ub2RlX21vZHVsZXMvbWk5LXV0aWxzL2V4dGVybmFsIFwibW9tZW50XCIiLCJ3ZWJwYWNrOi8vL25vZGVfbW9kdWxlcy9taTktdXRpbHMvZXh0ZXJuYWwgXCJtb21lbnQtdGltZXpvbmVcIiIsIndlYnBhY2s6Ly8vbm9kZV9tb2R1bGVzL21pOS11dGlscy9leHRlcm5hbCBcIm5vZGUtdXVpZFwiIiwid2VicGFjazovLy9ub2RlX21vZHVsZXMvbWk5LXV0aWxzL2V4dGVybmFsIFwidW5pdGl6ZVwiIiwid2VicGFjazovLy9ub2RlX21vZHVsZXMvbWk5LXV0aWxzL2V4dGVybmFsIFwidXJsXCIiLCJ3ZWJwYWNrOi8vL25vZGVfbW9kdWxlcy9taTktdXRpbHMvZXh0ZXJuYWwgXCJtaTktYnJlYWtwb2ludHMtY29tbW9uXCIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx1QkFBZTtBQUNmO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOzs7Ozs7Ozs7O0FDdENBLE9BQU0sQ0FBQyxPQUFQLEdBQWlCLG9CQUFRLGdCQUFSOzs7Ozs7Ozs7O0FDQWpCOztBQUFBLEtBQUks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LFNBQUMsR0FBRDtZQUNMLFFBQVEsR0FBUixDQUFZLENBQUMsU0FBYixDQUF1QixDQUF2QixDQUF5QixDQUFDLFFBQTFCLEVBQW9DLENBQUMsT0FBckMsQ0FBNkMsS0FBN0MsRUFBb0QsRUFBcEQ7R0FESyxDQXRGVDtHQXlGQSxZQUFZLFNBQUMsSUFBRCxFQUFPLElBQVA7QUFDUjtLQUFBLGNBQWtCO21EQUNDO0dBRlgsQ0F6Rlo7R0E2RkEsZ0JBQWdCLFNBQUMsT0FBRDtBQUNaO0tBQUEseUVBQWlDLENBQUUsV0FBdkIsMEJBQXdDO0tBQ3BELGlHQUFnQyxDQUFFLGdDQUFwQixLQUE0QjtBQUMxQyxZQUFRLGFBQWM7R0FIVixDQTdGaEI7Ozs7Ozs7Ozs7O0FDNUJKLG9DOzs7Ozs7Ozs7QUNBQSxvQzs7Ozs7Ozs7O0FDQUEsNkM7Ozs7Ozs7OztBQ0FBLHVDOzs7Ozs7Ozs7QUNBQSxxQzs7Ozs7Ozs7O0FDQUEsaUM7Ozs7Ozs7OztBQ0FBLG9EIiwiZmlsZSI6ImxpYi9tb2R1bGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHdlYnBhY2svYm9vdHN0cmFwIDYzNGFjNzVkYWNlYjg2NmI4NTg1XG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlICcuL3V0aWxzJ1xuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vfi9jb2ZmZWVsaW50LWxvYWRlciEuL3NyYy9zY3JpcHRzL2luZGV4LmNvZmZlZVxuICoqLyIsIl8gPSByZXF1aXJlICdsb2Rhc2gnXG5tb21lbnQgPSByZXF1aXJlICdtb21lbnQnXG50eiA9IHJlcXVpcmUgJ21vbWVudC10aW1lem9uZSdcbnV1aWQgPSByZXF1aXJlICdub2RlLXV1aWQnXG51bml0aXplID0gcmVxdWlyZSAndW5pdGl6ZSdcbnVybCA9IHJlcXVpcmUgJ3VybCdcbkJyZWFrcG9pbnRzID0gcmVxdWlyZSAnbWk5LWJyZWFrcG9pbnRzLWNvbW1vbidcblxuREFURV9FUlJPUiA9ICdJbnZhbGlkIERhdGUnXG5cbiMgc3RyaXBzIGEgYmFzZSBwYXRoIGZyb20gYSBnaXZlbiBwYXRoXG5zdHJpcEJhc2VQYXRoID0gKHBhdGgsIGJhc2UpIC0+XG4gICAgaWYgdHlwZW9mIHBhdGggaXMgJ3N0cmluZydcbiAgICAgICAgcGF0aCA9IHBhdGgucmVwbGFjZSBiYXNlLnJlcGxhY2UoL1xcLyokLywgJy8nKSwgICcnXG5cbiAgICBwYXRoXG5cbiMgcHJlZml4ZXMgZG9tYWluIHRvIGEgZ2l2ZW4gcGF0aFxuYWJzb2x1dGVVcmwgPSAocGF0aCwgZG9tYWluKSAtPlxuICAgIHBhdGggPSBwYXRoLnJlcGxhY2UgL15cXC8qLywgJydcbiAgICBkb21haW4gPSBkb21haW4ucmVwbGFjZSAvXFwvKiQvLCAnJ1xuXG4gICAgdW5sZXNzIGRvbWFpbi5tYXRjaCAvXmh0dHAocz8pOlxcL1xcLy9cbiAgICAgICAgZG9tYWluID0gXCIvLyN7ZG9tYWlufVwiICMgYWRkcyAvLyBwcmVmaXhcblxuICAgIFwiI3tkb21haW59LyN7cGF0aH1cIlxuXG5tb2R1bGUuZXhwb3J0cyA9XG4gICAgdXVpZDogLT5cbiAgICAgICAgdXVpZC52NCgpXG5cbiAgICAjIExpbWl0cyBhIGxpc3QgdG8gYSBtYXggb2YgbiBpdGVtcy4gVXNlZnVsIGFzIGEgc3ViZXhwcmVzc2lvbi5cbiAgICAjIGUuZy4ge3sjZWFjaCAobGltaXQgc3RvcmllcyA1KX19IHt7L2VhY2h9fSB0byBkaXNwbGF5IG9ubHkgNSBzdG9yaWVzXG4gICAgbGltaXQ6IChpdGVtcywgbGltaXQpIC0+IGl0ZW1zWy4uLmxpbWl0XSBpZiBpdGVtcz9cblxuICAgICMgUmVuZGVycyBhIHJlbGF0aXZlICd0aW1lIGFnbycgYmFzZWQgb24gJ25vdycuIElmIHRoZSB0aW1lIHdhcyBtb3JlIHRoYW4gdHdvXG4gICAgIyB3ZWVrcyBhZ28sIGZhbGwgYmFjayB0byBgQXByIDEydGgsIDIwMTRgIGZvcm1hdFxuICAgIHRpbWVBZ286ICh0aW1lc3RhbXApIC0+XG4gICAgICAgIGRhdGV0aW1lID0gbmV3IERhdGUodGltZXN0YW1wKVxuICAgICAgICByZXR1cm4gJycgaWYgZGF0ZXRpbWUgaXMgREFURV9FUlJPUlxuICAgICAgICB0aW1lID0gbW9tZW50IGRhdGV0aW1lXG4gICAgICAgIGRheXNEaWZmID0gbW9tZW50KCkuZGlmZiB0aW1lLCAnZGF5cydcbiAgICAgICAgaWYgZGF5c0RpZmYgPCAxNFxuICAgICAgICAgICAgcmV0dXJuIHRpbWUuZnJvbU5vdygpXG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJldHVybiB0aW1lLmZvcm1hdCAnTU1NIERvLCBZWVlZJ1xuXG4gICAgdGlja3NBZ286ICh0aWNrcywgZm9ybWF0ID0gJ01NTSBEbywgWVlZWScsIHJlbGF0aXZlVGltZSA9IG51bGwpIC0+XG5cbiAgICAgICAgIyBUbyBjdXN0b21pc2UgdGhlIHJldHVybmVkIGZyb21Ob3cgZm9ybWF0IHdlIG5lZWQgdG8gcGFzcyBpbiB0aGUgbG9jYWxlXG4gICAgICAgICMgb2JqZWN0IHNwZWNpZnlpbmcgdGhlIGZvcm1hdCBvZiBlYWNoIHVuaXQgZS5nLiB7IHM6ICdzZWMnLCBtOiAnbWluJywgLi4uIH1cbiAgICAgICAgaWYgcmVsYXRpdmVUaW1lXG4gICAgICAgICAgICBtb21lbnQubG9jYWwgJ2VuJywgeyByZWxhdGl2ZVRpbWU6IHJlbGF0aXZlVGltZSB9XG5cbiAgICAgICAgdGltZSA9IG1vbWVudCBuZXcgRGF0ZSB0aWNrc1xuICAgICAgICBkYXlzRGlmZiA9IG1vbWVudCgpLmRpZmYgdGltZSwgJ2RheXMnXG4gICAgICAgIGlmIGRheXNEaWZmIDwgMTRcbiAgICAgICAgICAgIHJldHVybiB0aW1lLmZyb21Ob3coKVxuICAgICAgICBlbHNlXG4gICAgICAgICAgICByZXR1cm4gdGltZS5mb3JtYXQgZm9ybWF0XG5cbiAgICAjIFJldHVybnMgYSBmb3JtYXR0ZWQgc3RyaW5nIG9mIHRoZSBjdXJyZW50IGRhdGUuXG4gICAgY3VycmVudERhdGU6IChmb3JtYXQpIC0+XG4gICAgICAgIG5vdyA9IHR6IG1vbWVudCgpXG4gICAgICAgIG5vdy50eignQXVzdHJhbGlhL1N5ZG5leScpLmZvcm1hdChmb3JtYXQpXG5cbiAgICBmb3JtYXREYXRlOiAoZGF0ZSwgZm9ybWF0KSAtPlxuICAgICAgICBkYXRldGltZSA9IG5ldyBEYXRlKGRhdGUpXG4gICAgICAgIHJldHVybiAnJyBpZiBkYXRldGltZSBpcyBEQVRFX0VSUk9SXG4gICAgICAgIHJldHVybiBtb21lbnQoZGF0ZXRpbWUpLmZvcm1hdChmb3JtYXQpXG5cbiAgICAjIFJlbmRlcnMgdGhlIGRvbWFpbiBwYXJ0IG9mIGEgVVJMXG4gICAgZG9tYWluOiAodXJsU3RyKSAtPlxuICAgICAgICBkb21haW5FeHByID0gL14oKD86aHR0cHM/XFw6XFwvXFwvKT8oPzpbYS16MC05LV9dK1xcLikqW2EtejAtOS1fXStcXC4/KD86OihbMC05XSspKT8pL2lcbiAgICAgICAgaWYgZG9tYWluRXhwci50ZXN0IHVybFN0clxuICAgICAgICAgICAgKHVybFN0ci5tYXRjaCBkb21haW5FeHByKVsxXVxuXG4gICAgcmVzaXplSW1hZ2U6ICh3aWR0aCwgc3JjKSAtPlxuICAgICAgICByZXR1cm4gXCJodHRwOi8vaW1hZ2VzLm5pbmVtc24uY29tLmF1L3Jlc2l6ZXIuYXNweD93aWR0aD0je3dpZHRoLnRvU3RyaW5nKCl9JnVybD0je2VuY29kZVVSSSBzcmN9XCJcblxuICAgIGFkZDogKHZhbHVlLCBhZGRpdGlvbikgLT5cbiAgICAgICAgdmFsdWUgKyBhZGRpdGlvblxuXG4gICAgbG93ZXJDYXNlOiAodGV4dCkgLT5cbiAgICAgICAgaWYgdHlwZW9mIHRleHQgPT0gJ3N0cmluZydcbiAgICAgICAgICAgIHRleHQudG9Mb3dlckNhc2UoKVxuXG4gICAgY29udGVudFVybEJ1aWxkZXI6ICh7IHVybCwgZG9tYWluLCBiYXNlIH0pIC0+XG4gICAgICAgIGlmIGJhc2UgICB0aGVuIHVybCA9IHN0cmlwQmFzZVBhdGggdXJsLCBiYXNlXG4gICAgICAgIGlmIGRvbWFpbiB0aGVuIHVybCA9IGFic29sdXRlVXJsIHVybCwgZG9tYWluXG5cbiAgICAgICAgdXJsXG5cbiAgICB0b0Fic29sdXRlVXJsOiBhYnNvbHV0ZVVybFxuXG4gICAgbm9tYXJrdXA6IChodG1sKSAtPlxuICAgICAgICBodG1sPy5yZXBsYWNlIC88Lis/Pi9nLCAnJ1xuXG4gICAgcGFnZVRpdGxlOiAodGl0bGUsIGRlZmF1bHRUaXRsZSwgdGl0bGVEZWNvcmF0aW9uKSAtPlxuICAgICAgICBpZiB0aXRsZSB0aGVuIFwiI3tleHBvcnRzLm5vbWFya3VwIHRpdGxlfSAje3RpdGxlRGVjb3JhdGlvbn1cIiBlbHNlIGRlZmF1bHRUaXRsZVxuXG4gICAgIyBVc2VkIGZvciBwbGFjZWhvbGRlciBwYWRkaW5nIChoZWlnaHQgLyB3aWR0aClcbiAgICBhc3BlY3RSYXRpbzogKGhlaWdodCwgd2lkdGgpIC0+XG4gICAgICAgIChoZWlnaHQgLyB3aWR0aCkgKiAxMDBcblxuICAgICMgQ29ycmVjdCB3aWR0aCAvIGhlaWdodCBhc3BlY3RcbiAgICBpbWFnZUFzcGVjdDogKHdpZHRoLCBoZWlnaHQpIC0+XG4gICAgICAgIGFzcGVjdCA9IHdpZHRoIC8gaGVpZ2h0XG5cbiAgICB1dGNUb0xvY2FsVGltZXpvbmU6ICh1dGMpIC0+XG4gICAgICAgIGRhdGV0aW1lID0gbmV3IERhdGUodXRjKVxuICAgICAgICByZXR1cm4gJycgaWYgZGF0ZXRpbWUgaXMgREFURV9FUlJPUlxuICAgICAgICBtb21lbnQoZGF0ZXRpbWUpLnR6KGVudi5nZXQgJ21ldGE6dGltZXpvbmUnKS5mb3JtYXQoKVxuXG4gICAgdW5pdGl6ZTogKG51bSkgLT5cbiAgICAgICAgdW5pdGl6ZShudW0pLnByZWNpc2lvbigxKS50b1N0cmluZygpLnJlcGxhY2UoL1xcIC9nLCAnJylcblxuICAgIGJyZWFrcG9pbnQ6IChzaXplLCB0eXBlKSAtPlxuICAgICAgICBicmVha3BvaW50cyA9IG5ldyBCcmVha3BvaW50cygpXG4gICAgICAgIGJyZWFrcG9pbnRzW3NpemVdP1t0eXBlXVxuXG4gICAgc2hvd1ZpZGVvQmxvY2s6IChjb250ZW50KSAtPlxuICAgICAgICBpc0FydGljbGUgPSBjb250ZW50Py50ZW1wbGF0ZU5hbWU/LnRvTG93ZXJDYXNlKCkgPT0gJ2FydGljbGUnXG4gICAgICAgIGhlcm9Jc1ZpZGVvID0gY29udGVudD8ubWVkaWE/WzBdPy50eXBlID09ICd2aWRlbydcbiAgICAgICAgcmV0dXJuIChpc0FydGljbGUgYW5kIGhlcm9Jc1ZpZGVvKVxuXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL34vY29mZmVlbGludC1sb2FkZXIhLi9zcmMvc2NyaXB0cy91dGlscy5jb2ZmZWVcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJsb2Rhc2hcIik7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiBleHRlcm5hbCBcImxvZGFzaFwiXG4gKiogbW9kdWxlIGlkID0gMlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwibW9tZW50XCIpO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogZXh0ZXJuYWwgXCJtb21lbnRcIlxuICoqIG1vZHVsZSBpZCA9IDNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIm1vbWVudC10aW1lem9uZVwiKTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIGV4dGVybmFsIFwibW9tZW50LXRpbWV6b25lXCJcbiAqKiBtb2R1bGUgaWQgPSA0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJub2RlLXV1aWRcIik7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiBleHRlcm5hbCBcIm5vZGUtdXVpZFwiXG4gKiogbW9kdWxlIGlkID0gNVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwidW5pdGl6ZVwiKTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIGV4dGVybmFsIFwidW5pdGl6ZVwiXG4gKiogbW9kdWxlIGlkID0gNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwidXJsXCIpO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogZXh0ZXJuYWwgXCJ1cmxcIlxuICoqIG1vZHVsZSBpZCA9IDdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIm1pOS1icmVha3BvaW50cy1jb21tb25cIik7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiBleHRlcm5hbCBcIm1pOS1icmVha3BvaW50cy1jb21tb25cIlxuICoqIG1vZHVsZSBpZCA9IDhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyJdLCJzb3VyY2VSb290IjoiIn0=